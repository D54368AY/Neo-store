(function(v){var t=window.AmazonUIPageJS||window.P,ea=t._namespace||t.attributeErrors,f=ea?ea("DetailPageImageBlockAssets",""):t;f.guardFatal?f.guardFatal(v)(f,window):f.execute(function(){v(f,window)})})(function(v,t,ea){v.register("postMetric",function(){return{postCountMetric:function(f){if("undefined"!==typeof f){var a=t.ue;if(a){var b=a.count(f)||0;a.count(f,b+1)}}},postTimeMetric:function(f,a){if("undefined"!==typeof f&&"undefined"!==typeof a){var b=t.ue;b&&b.count(f,a)}},emitNexusMetric:function(f){t.ue&&
ue.event&&ue.event(f,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(f,a,b,g,l,d,p,c){return{eventSource:"IBCarousel",placementContext:c,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:f,intPayload:a,videoAsin:b,videoAsinList:"",groupType:g,pageUrl:l,pageAsin:d,weblabIds:p}}}});"use strict";v.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});v.register("postEarlyMetric",function(){return null});"use strict";
v.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(f,a,b,g){f=f.extend(!0,{},b,g);var l=new a(f);v.register("ImageBlockAPI",function(){return l.api});return l});"use strict";v.when("A","jQuery").execute(function(f,a){f.on("a:image:load:landingImage",function(){t.performance&&performance.now&&t.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});f.loadDynamicImage(a("#landingImage"))});"use strict";v.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(f){function a(b){b&&(v.load.js(b),t.performance&&performance.now&&t.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",t.parseInt(performance.now())))}function b(b){b&&v.load.css(b)}var g=f.airyConfig;g===ea?v.when("ImageBlockBTF").execute(function(f){g=f.airyConfig;a(g.jsUrl);b(g.cssUrl)}):(a(g.jsUrl),b(g.cssUrl))});"use strict";v.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(f,
a,b,g,l){var d={};return function(p){var c=this;c.dispatch=function(b,a){var c=d[b];g.isDefined(c)&&f.each(c,function(b,d){d.call(t,a)})};c.register=function(b,a){g.isDefined(d[b])||(d[b]=[]);"function"===typeof a&&d[b].push(a)};c.model=new a(p,c);c.view=new b(p,c,c.model);c.api=new l(p,c,c.model);c.init=function(){c.model.init();c.view.init()};c.init()}});"use strict";v.when("A","imageBlockUtils").register("ImageBlockModel",function(f,a){function b(b,d,c,f,g,p){a.isDefined(b)&&(n.type=b);a.isDefined(d)&&
(n.index=d);a.isDefined(c)&&(n.thumbnailIndex=c);a.isDefined(f)&&(n.variant=f);a.isDefined(g)&&(n.color=g);n.shoppableScene=p||null}function g(a){b("image",0,0,"MAIN",a||c.landingAsinColor||c.defaultColor,null)}function l(a){a=a.data;O=f.copy(n);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}function d(b){l(b);b=f.copy(b);b.data=f.copy(n);q.dispatch("updateView",b)}function p(){O=f.copy(n);g(n.color)}var c,q,n={},O={},E,t;return function(b,a){q=a;c=b;q.register("updateSelection",
d);q.register("updateModel",l);q.register("resetModel",p);this.init=function(){g()};this.getCurrentItem=function(){return f.copy(n)};this.getPreviousItem=function(){return f.copy(O)};this.setCurrentEvent=function(b){E=b};this.getCurrentEvent=function(){return E};this.setImmersiveViewModalInstance=function(b){t=b};this.getImmersiveViewModalInstance=function(){return t};this.updateTitle=function(b){c.title=b}}});"use strict";v.when("ImageBlockBTF","postMetric").register("ImageBlockInitViews",function(f,
a){function b(b,a,g,c,q){function n(b){"click"===b.type&&c.postCountMetric("thumbClick");"click"===b.type&&r.overrideAltImageClickAction?y.dispatch("thumbActionClick",b):y.dispatch("updateSelection",b)}function O(b){r.useClickZoom||y.dispatch("imageClick",b)}function E(b){r.useClickZoom||y.dispatch("imageHover",b)}function K(b){y.dispatch("button360Click",b)}function w(a){!g.isDefined(a)||"swatchClick"!==a.type&&"updatedData"!==a.type?(m.update(a),"swatchHover"!==a.type&&D.getPreviousItem().thumbnailIndex!==
a.data.thumbnailIndex&&c.postCountMetric(a.data.type+"ThumbnailSelected"),b.trigger("image-block-thumbnail-selected",a.data)):(m.render(a.data.color,!1,a.onload),a={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof t.markFeatureRender&&t.markFeatureRender("imageblock",a))}function C(b){y.dispatch("resize",b)}function M(b){g.selectThumbnail(b,x)}function L(){"function"===typeof t.markFeatureInteractive&&t.markFeatureInteractive("imageblock",{hasComponents:!0,
components:[{name:"mainimage",events:["click"],alwaysInteractive:!0}]})}function N(){"function"===typeof t.markFeatureInteractive&&t.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===f.useIV?v.when("a-modal").execute(function(){L()}):L();r.disableHoverOnAltImages||b.declarative("thumb-action",["mouseenter","mouseleave"],n);b.declarative("thumb-action",["click"],
n);b.declarative("main-image-click",["click"],O);b.declarative("main-image-click",["mouseenter","mouseleave"],E);b.declarative("button-360-click",["click"],K);b.on("resize",C)}function Q(b){var a=b.data,d;a&&"ingress"!==a.type&&"click"===b.type&&(d=b);return d}function k(b){var a=D.getCurrentItem(),d={type:"click"};d.$declarativeParent=b;d.data=a;return d}var m,r,y,D,x;return function(b,c,f){m=this;r=b;y=c;D=f;x=a("#imageBlock #altImages ul");var g=a("#imageBlock .canvas"),h=a("#main-image-container"),
e;m.subViews=[];for(c=0;c<q.length;c++)m.subViews.push(new q[c](b,f,m,y));m.render=function(b,c,f){var p=0;x.find(".item").remove();b=b||D.getCurrentItem().color;a.each(m.subViews,function(e,a){p=a.render(b,p,g,x,h,c,f)||p});var l=x.find(".a-button-selected").closest(".a-declarative");e=k(l)};m.init=function(){x=a("#imageBlock #altImages ul");var b=x.find(".a-button-selected").closest(".a-declarative"),e=b.data("action"),b=b.data(e)||{};b.color=r.landingAsinColor||r.defaultColor;y.dispatch("updateModel",
{data:b});m.render(b.color,!0);r.isDebug&&t.console&&console.log(r);y.register("updateView",w);y.register("selectThumbnail",M);N()};m.update=function(b){a.each(m.subViews,function(e,a){a.update(b)});r.usePeekHover&&("mouseleave"===b.type?y.dispatch("updateSelection",e):"click"===b.type&&(e=Q(b)||e))}}}var g=["A","jQuery","imageBlockUtils","postMetric"].concat(f.views);v.when.apply(v,g).register("ImageBlockView",function(){for(var a=arguments[0],d=arguments[1],f=arguments[2],c=arguments[3],g=[],n=
4,O=arguments.length;n<O;n++)g.push(arguments[n]);return b(a,d,f,c,g)})});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(f,a,b,g,l,d,p){function c(d,k,h,e){if(!b.isjQueryObjDefined(d.find(".a-button-selected"))){var B=r.getCurrentItem();if(!e||"chromeless-video"!==B.type||!m.autoplayVideo){e=0;"image"===B.type&&(e=Math.max(E(B.color,B.variant),0));var c=k+e;c>=h&&(e=0,c=k);
k=b.getImageHash(B.color,e,m);-1!==k&&(y.dispatch("updateModel",{data:{index:e,thumbnailIndex:c,variant:k.variant,type:"image",shoppableScene:k.shoppableScene}}),k=d.find(".item").get(c),b.selectGivenThumbnail(a(k),d))}}}function q(k,f,h){f=m.colorImages&&m.colorImages[f];var e=k;b.isDefined(f)&&(a.each(f,function(e,a){k<m.maxAlts&&(b.createThumbnail({type:"image",index:e,thumbnailIndex:k,variant:a.variant,shoppableScene:a.shoppableScene},a.thumb,D,"imageThumbnail"),k++)}),d.isEnabled&&p.logAltImgRequestPlacedOnThumbnails(a,
d,r),c(D,e,k,h));return k}function n(d,k){if("image"===d.type){var h=a("#image-canvas-caption #canvasCaption"),e,c=m.staticStrings,f=m.colorImages,g=d.color,p=d.index;b.isShoppableScenesEnabled()&&d.shoppableScene?e=c.clickSceneTagsToShopProducts:k&&m.useIV?e=c.clickToExpand:f[g]&&f[g][p].hiRes&&m.useHoverZoom?(e=m.useHoverZoomIpad?c.touchToZoom:m.useClickZoom?c.clickToZoom:c.rollOverToZoom,m.hoverZoomIndicator&&(e="\x3cimg src\x3d'"+m.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+e)):m.useIV&&(e=
c.clickToExpand);h.html(e)}}function O(){x.find("li").removeClass("selected");a("#image-canvas-caption #canvasCaption").empty();b.hideUnavailable()}function E(a,d){return b.getIndexForVariant(a,d,m)}function t(d,k){var h="a-dynamic-image";if(!m.acEnabled){var e;a.each(d.main,function(a,h){b.isDefined(e)||(e=parseFloat(h[1]/h[0])<=parseFloat(m.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});h+=e}var c=b.getMaxDimensionsOfMainImage(d.main,J,m),f=c[0],g=c[1],c=a("\x3cdiv\x3e\x3c/div\x3e"),
f={"max-height":f,"max-width":g};c.addClass(h).css(f).attr({"data-old-hires":d.hiRes,"data-a-manual-replacement":"true",onload:k}).data("a-dynamic-image",d.main);return c}function w(b){var a=J.css("height");null!==a&&b.find(".imgTagWrapper").css("height",a);b.addClass("selected");m.imgTagWrapperClasses&&b.find(".imgTagWrapper").addClass(m.imgTagWrapperClasses)}function C(a,k){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){b.isDefined(k)&&l.postCountMetric("mainImageUpdateOnTwisterVariationClick");
var h=b.getImageHash(a.color,a.index,m);if(-1===h)return h={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},L(a)||(y.dispatch("updateModel",h),b.showUnavailable(a.color)),-1;var e=x.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(e)){var e=a.thumbnailIndex,c=t(h,k),g;if(b.isShoppableScenesEnabled()&&h.shoppableScene){g="desktop-dp-atf-ib-shoppablescenes-tags-"+e;"function"==typeof uet&&uet("bb",g,{wb:1});c.attr("data-a-image-name","shoppable-scene");var A=x.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");
A.addClass("celwidget").attr("cel_widget_id",g);A.children("span").css("display","inline-block");y.dispatch("initialize-shoppable-scene",{index:e,shoppableScene:h.shoppableScene,imageSource:h.hiRes||h.large||h.lowRes,$tagPlaceholder:A.find(".mirai-scene-tag-placeholder"),$viewProductsButton:A.find(".mirai-scene-view-products-button")});"function"==typeof uet&&uet("cf",g,{wb:1});g=A}else g=x.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");g.addClass("image item itemNo"+
e+" maintain-height");g.find(".placeHolder").replaceWith(c);x.find(".list").append(g);f.loadImageManually(c);e=g}w(e);y.dispatch("loadMagnifier");n(a);m.useIV&&b.isDefined(h.hiRes)&&e.css("cursor","pointer");a.isUserGenerated&&(e=r.getPreviousItem(),c=a.variant,b.isDefined(c)&&e.thumbnailIndex!==a.thumbnailIndex&&(d.isEnabled&&p.logAltImgRequestServed(d),l.postCountMetric("ImageThumbnailSelectedVariant:"+c),0===c.indexOf("IG")&&(l.postCountMetric("IGImageSelectedVariant:"+c),l.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));f.trigger("dp:image-block:update",h)}}function M(){a("#imageBlock").css("opacity","1");x.css("opacity","1");b.spinner(x,!1)}function L(a){return b.lazyLoadingRequired(a,r,m)}function N(){var d=x.find(".item .imgTagWrapper"),c=b.getContainerHeight(J,m.holderRatio,m.holderMaxHeight);0<c&&(J.height(c),d.height(c));x.find("img.a-dynamic-image").each(function(){var h=a(this);h.data("a-manual-replacement")&&f.loadDynamicImage(this);var e=h.data("a-dynamic-image"),e=b.getMaxDimensionsOfMainImage(e,
J,m);h.css({"max-height":e[0]+"px","max-width":e[1]+"px"})})}function Q(b){n(r.getCurrentItem(),"mouseenter"===b.type)}var k,m,r,y,D,x,J,H;f.on("triggerImageAjax",function(a){var d=r.getCurrentItem().color;m.colorImages[d]||(m.colorImages[d]=a);a={type:"updatedData",data:r.getCurrentItem()};y.dispatch("updateView",a);(d=m.colorToAsin[d])&&d.asin&&v.register(b.rankedImagesReadyEvent(d.asin))});return function(a,d,h,e){k=this;m=a;r=d;y=e;m.colorImages[m.landingAsinColor]=m.colorImages[m.defaultColor];
k.render=function(b,a,e,h,d,c,k){x=e;D=h;J=d;H=q(a,b,c);c||(b=r.getCurrentItem(),L(b)&&y.dispatch("updateModel",{data:{type:"lazy-loaded"}}));b=r.getCurrentItem();c=!c;L(b)||(M(),O(),c&&x.find(".list .item").remove());C(r.getCurrentItem(),k);return H};k.update=function(a){var e=a.data;r.setCurrentEvent(a);"ingress"===e.type||L(a.data)||(M(),O());if("swatchHover"===a.type)if(e.color===r.getCurrentItem().color)C(r.getCurrentItem());else{if(!a.captured){var h;h=Math.max(E(e.color,r.getCurrentItem().variant),
0);h=b.getImageHash(e.color,h,m);if(-1===h)L(e)||b.showUnavailable(e.color),h=-1;else{var e=x.find(".swatchHoverExp"),d=t(h);e.find(".imgTagWrapper").html(d);f.loadImageManually(d);l.postCountMetric("mainImageUpdateOnTwisterVariationHover");w(e);f.trigger("dp:image-block:update",h);h=void 0}-1!==h&&(a.captured=!0)}}else"image"===e.type&&(e.interaction=a.type,e.isUserGenerated=!0,"mouseenter"===a.type&&l.postCountMetric("dpcc_imageThumbHovered_"+(e.thumbnailIndex+1)+"_"+H),C(e),m.usePeekHover&&"click"!==
a.type||(b.selectGivenThumbnail(a.$declarativeParent,D),"click"===a.type&&(l.postCountMetric("dpcc_imageThumbClicked_total"),l.postCountMetric("dpcc_imageThumbClicked_"+(e.thumbnailIndex+1)+"_"+H))))};m.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");y.register("imageHover",Q);y.register("resize",N)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(f,a,b,g,l,d){function p(a){L?
a.css("cursor","url('"+E.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function c(a){var d=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(d))for(var d=d[1].split("_"),c=0;c<d.length;c++){var f=d[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(f)&&(a[f[1]]=parseInt(f[2],10))}return a}function q(n,q){function k(){var a;q.useClickZoom?(a=q.offsetInClickZoom,a=[Math.min(1,Math.max(0,B[0]-(A[0]+a))/(A[2]-2*
a)),Math.min(1,Math.max(0,B[1]-(A[1]+a))/(A[3]-2*a))]):a=e&&e.updatePosition();if(a&&h&&h.detailSize){var b=[h.detailSize[0]-h.rect.width,h.detailSize[1]-h.rect.height];f.capabilities.rtl?h.detailImage.get(0).style.right=-(a[0]*b[0])+"px":h.detailImage.get(0).style.left=-(a[0]*b[0])+"px";h.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function m(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function r(b){var e=T?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";
B=T?[e.pageX,e.pageY]:[b.pageX,b.pageY];if(f.capabilities.rtl){var h=a(t).width();B=T?[h-e.pageX,e.pageY]:[h-b.pageX,b.pageY]}}function y(a){T&&a.preventDefault();r(a);q.useClickZoom?a=[A[0],A[1],A[0]+A[2],A[1]+A[3]]:(a=e?e.offset:n.offsetParent().offset(),a=E.acEnabled?[a.left,a.top,C.width()+a.left,C.height()+a.top]:[F[0]+a.left,F[1]+a.top,F[0]+F[2]+a.left,F[1]+F[3]+a.top]);B[0]<a[0]||B[1]<a[1]||B[0]>=a[2]||B[1]>=a[3]||E.acEnabled&&!m(n)?(q.fadeMagnifier?Y||(Y=!0,ca=setTimeout(function(){D(!0)},
500)):q.useClickZoom||D(),z&&(z=!1,clearTimeout(ba))):(z||(z=!0,ba=setTimeout(function(){g.postCountMetric("dppc_hoverZoomOpened");l.isEnabled&&d.logHoverZoomRequestServed(l)},1E3)),q.fadeMagnifier&&Y&&(Y=!1,clearTimeout(ca)),k())}function D(b){b&&w.suppressMagnifier(!0);if(K&&(h&&h.hide(),e&&(e.destroy(),e=null),K=!1,T?(n.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
O(),b))n.one("click.magnifier touchstart.magnifier",function(a){x(a,!0)})}function x(b,d){d&&w.suppressMagnifier(!1);if(!K&&!V&&(0===U&&(g.postCountMetric("dppc_hoverTime",new Date-(t.ue&&t.ue.t0||0)),U=1),ia[X]||(g.postCountMetric("dppc_hoverMain"),ia[X]=1),F=[n.position().left,n.position().top,n.width(),n.height()],X&&(r(b),h?h.refit().show():h=new M,q.useClickZoom||(e=e||new da),A=h.getWindowSize(),k()),K=!0,T?(n.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",y).bind("touchend.magnifier",
D),a(document).trigger("engaged.magnifier")):(E.acEnabled?C.unbind("mousemove.magnifier"):n.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",y)),d)){var c=a("#zoomWindow");if(0<c.length)c.one("click.magnifier touchend.magnifier",function(a){D(!0)})}}function O(){q.useHoverZoom&&(T?n.bind("touchstart.magnifier touchmove.magnifier",x):E.acEnabled?m(n)&&C.bind("mousemove.magnifier",x):n.bind("mousemove.magnifier",x))}var w=this,C=n.offsetParent(),v={detailImageUrl:n.attr("data-old-hires"),
location:"over",locationElement:n,prelaod:"ready",zIndex:50,offsetInClickZoom:50};q=a.extend(v,q);q.adjustment=[10,0,-10,0];var h=null,e=null,B=null,F=null,A=null,I={"null":1,"":1,undefined:1},K=!1,V=!1,X=q.detailImageUrl,T=q.useHoverZoomIpad||0,U=0,ia={},da=function(){function b(a){var e=Math.round(Math.min(n.width(),h.rect.width/a));a=Math.round(Math.min(n.height(),h.rect.height/a));f.css({width:e,height:a});d=[e,a]}var e=this,d=[0,0],c=(h.detailSize&&h.detailSize[0]||5E8)/F[2],k=(h.detailSize&&
h.detailSize[1]||5E8)/F[3],c=k>c?k:c;a("#magnifierLens").remove();var f=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});q.generalImageUrls.zoomLensBackground&&f.css({backgroundImage:"url("+q.generalImageUrls.zoomLensBackground+")"});E.showMagnifierOnHover?p(f):f.css("cursor","pointer");e.updatePosition=function(){var a=[F[2]-d[0],F[3]-d[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(B[0]-d[0]/2-F[0]-e.offset.left)/a[0])),h=0>=a[1]?.5:Math.max(0,Math.min(1,(B[1]-d[1]/2-F[1]-e.offset.top)/
a[1])),c=F[0]+Math.round(b*a[0]),a=F[1]+Math.round(h*a[1]);f.get(0).style.left=c+"px";f.get(0).style.top=a+"px";return[b,h]};e.destroy=function(){f.remove()};e.offset=n.offsetParent().offset();b(c);e.updatePosition();f.appendTo(n.parent());h.detailImage[0].complete||h.detailImage.load(function(){var a=h.detailImage.width()/F[2];b(a);e.updatePosition()})};da.preload=function(){w.preload(q.generalImageUrls.lensBackgroundUrl)};var M=function(){function e(){var h={};if("over"===q.location){var h=q.useClickZoom,
c={},k=a("#leftCol"),g=a("#centerCol"),p=a("#rightCol"),l=a("#hover-zoom-end"),B=a("#actionPanelContainer"),r=b.isjQueryObjDefined(k)?k.outerHeight():g.outerHeight();c.top=b.isjQueryObjDefined(k)?k.offset().top:g.offset().top;c.bottom=r+c.top;c.right=b.isjQueryObjDefined(p)?p.offset().left:B.offset().left;c.left=h?0:k.offset().left+k.outerWidth();b.isjQueryObjDefined(l)&&l.offset().top>c.bottom&&(c.bottom=l.offset().top);h=c}else"right"===q.location&&(h=n.offset(),h={left:h.left+n.outerWidth(),top:h.top,
right:h.left+n.outerWidth()+400,bottom:h.top+400});q.minHeightElement&&(h.bottom=Math.max(h.bottom,h.top+a(q.minHeightElement).outerHeight()));h.bottom=Math.min(h.bottom,a(t).scrollTop()+a(t).height());h.left+=f[0];h.top+=f[1];h.right+=f[2];h.bottom+=f[3];h.width=h.right-h.left;h.height=h.bottom-h.top;q.enhancedHoverOverlay&&b.isDefined(t.pageXOffset)&&(c=a(t).width(),h.width=c-h.left+t.pageXOffset-18,h.height-=14);m.css({left:h.left,top:h.top,width:h.width,height:h.height});d.rect=h;return d}function h(a){var b=
new Image;d.detailSize=[0,0];b.onload=function(){d.detailSize=[b.width,b.height];k()};b.src=a.attr("src");if(0<b.width&&0<b.height)d.detailSize=[b.width,b.height];else if(q.detailImageSize)d.detailSize=q.detailImageSize;else{a=c(b.src);var e=F[2]/F[3];a.SS||a.AA?(a=a.SS||a.AA,d.detailSize=[a,a]):a.SX?d.detailSize=[a.SX,Math.round(a.SX/e)]:a.SY?d.detailSize=[Math.round(a.SY*e),a.SY]:a.SL&&(d.detailSize=1<=e?[a.SL,Math.round(a.SL/e)]:[Math.round(a.SL*e),a.SL])}}var d=this,f=q.adjustment;a("#zoomWindow").remove();
var g={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:q.zIndex};q.enhancedHoverOverlay&&(g.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",g.border="1px solid #949494",g.borderColor="rgb(148,148,148)");var m=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(g);q.fadeMagnifier&&m.fadeIn(200);q.useClickZoom&&(L?m.css("cursor",'url("'+q.zoomOutIcon+'"), auto'):(m.css("cursor","-webkit-zoom-out"),m.css("cursor","-moz-zoom-out"),m.css("cursor","zoom-out")));d.updateImage=function(b){b=a("\x3cimg id\x3d'detailImg' src\x3d'"+
b+"'/\x3e").css("position","absolute");d.detailImage&&d.detailImage.remove();m.append(b);a(document).trigger("updated.magnifier");d.detailImage=b;h(d.detailImage)};d.refit=function(){e();h(d.detailImage);return d};q.fadeMagnifier?(d.show=function(){m.fadeIn(200);return d},d.hide=function(){m.fadeOut(200);return d}):(d.show=function(){m.show();return d},d.hide=function(){m.hide();return d});d.destroy=function(){m.remove();return d};d.getWindowSize=function(){return[d.rect.left,d.rect.top,d.rect.width,
d.rect.height]};d.updateImage(X);e();m.appendTo(document.body)},Y=!1,ca,z=!1,ba;w.preload=function(b){b=a.makeArray(b);for(var e=b.length,h=0;h<e;h++)b[h]instanceof Array?w.preload(b[h]):"string"===typeof b[h]&&b[h]&&!I[b[h]]&&(I[b[h]]=new Image,I[b[h]].src=b[h])};w.changeImage=function(b,e){K&&D();X=e;n.attr("src",b);w.preload(b);F=[n.position().left,n.position().top,n.width(),n.height()];e&&("immediately"===q.preload?w.preload(e,!0):a(t).ready(function(){w.preload(e)}),h?h.updateImage(e):n.attr("data-old-hires",
e))};w.destroy=function(){E.acEnabled?C.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):n.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");e&&e.destroy();e=null;h&&h.destroy();h=null};w.detailImage=function(){return h.detailImage};w.suppressMagnifier=function(a){V=a};w.isEngaged=function(){return K};w.engageMagnifier=x;w.disengageMagnifier=D;n[0].complete?O():n.one("load",O);w.preload(n.attr("src"));
t.performance&&performance.now&&t.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(q.preload){var ja=q.detailImageUrl,v=function(){w.preload(ja,!0);q.useClickZoom||da.preload()},W=q.preload;W.constructor!==Array&&(W=[W]);for(var u=0;u<W.length;u++)if("immediately"===W[u])v();else if(a(t)[W[u]])a(t)[W[u]](v);else a(t).bind(W[u],v)}return w}function n(){if(E.useHoverZoom){var c={adjustment:[0,0,1,1],generalImageUrls:E.staticImages,location:"over",minHeightElement:"#imageBlock",
preload:"ready",zIndex:199,useHoverZoomIpad:E.useHoverZoomIpad,useHoverZoom:E.useHoverZoom,useClickZoom:E.useClickZoom,fadeMagnifier:E.fadeMagnifier,zoomOutIcon:E.staticImages.zoomOutCur,enhancedHoverOverlay:E.enhancedHoverOverlay||E.atfEnhancedHoverOverlay};C&&(C.destroy(),C=ea);var f=M.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(f)?E.useClickZoom?(f.one("click.loadmagnifier touchstart.loadmagnifier",function(a){C=
new q(f,c);C.engageMagnifier(a,!0)}),L?f.css("cursor",'url("'+E.staticImages.zoomInCur+'"), auto'):(f.css("cursor","-webkit-zoom-in"),f.css("cursor","-moz-zoom-in"),f.css("cursor","zoom-in"))):C=new q(f,c):l.isEnabled&&d.logHoverZoomApplicability(a,l)}}var O,E,v,w,C,M,L=navigator.userAgent.match(/msie|trident/i);return function(a,b,d,c){O=this;E=a;v=b;l.refToModel=v;w=c;O.render=function(a,b,d,c,k,f){M=d;C&&(C.destroy(),C=ea)};O.update=function(a){};w.register("loadMagnifier",n);w.register("resize",
n)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(f,a,b,g){function l(a,d,f){a=(a=f?f:b.getColorFromState(d.getState().hovered_variations,c))&&""!==a?a:c.defaultColor;n.dispatch("updateView",{type:"swatchHover",data:{color:a}});g.postCountMetric("swatchHover")}function d(a,d,f,p){a=(a=p?p:b.getColorFromState(d.getState().selected_variations,c))&&""!==a?a:c.defaultColor;a===q.getCurrentItem().color?"function"===typeof f&&f():(n.dispatch("updateSelection",
{type:"swatchClick",data:{color:a},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof t.markFeatureRender&&t.markFeatureRender("imageblock",a);f()}}),g.postCountMetric("swatchClick"))}var p,c,q,n;return function(a,b,g,w){p=this;c=a;q=b;n=w;f.on("image-block-twister-swatch-hover",l);f.on("image-block-twister-swatch-click",d);p.render=function(a,b,d,c,f){};p.update=function(a){}}});"use strict";v.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader",
"postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(f,a,b,g,l,d,p){function c(b,e,h,d){!k.autoplayVideo||T||k.useChromelessVideoPlayer?!g.isjQueryObjDefined(b.find(".a-button-selected"))&&(h=m.getCurrentItem(),!d||k.prioritizeVideos||"chromeless-video"===h.type&&k.autoplayVideo)&&(d=g.getVideoHash(h.color,0,k),-1!==d&&(e+=0,r.dispatch("updateModel",{data:{index:0,thumbnailIndex:e,variant:d.variant,type:k.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=b.find(".item").get(e),
g.selectGivenThumbnail(a(e),b))):(g.selectGivenThumbnail(b.find("img:last"),b),g.fadeToThumbnail(b.find("img").length-1,J,b))}function q(a){var b=m.getCurrentItem().color;if(k.useChildVideos&&!k.colorToVideo[b]){var e=function(){if(a){k.colorToVideo[b]=a;var e={type:"updatedData",data:m.getCurrentItem()};r.dispatch("updateView",e)}};k.lazyLoadExperienceDisabled?e():v.when(g.rankedImagesReadyEvent(k.colorToAsin[b].asin)).execute(function(){e()})}}function n(a){if(!k.useChildVideos)return g.lazyLoadingRequired(m.getCurrentItem(),
m,k)?void 0:k.videos;if(k.colorToVideo[a])return k.colorToVideo[a];var b=k.colorToAsin[a];if(b&&b.asin){var e={};e.params={asin:b.asin,productGroupID:k.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:k.useChromelessVideoPlayer,isUDP:k.isUDP};k.isDPXFeatureEnabled||(e.success=function(a){q(a)},l.load("/gp/product/features/apparel-main-image/videos.html",e));return k.colorToVideo&&k.colorToVideo[a]}}function O(){G&&(G.hide(),D.parent().css("z-index",-1),x.hide())}function E(){r.dispatch("selectThumbnail",
g.useTabbedImmersiveView(k)?1:0)}function K(e,h,c,f){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:e[0],streamingUrls:h.url,swfUrl:c.swfUrl,foresterMetadataParams:c.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=g.isjQueryObjDefined(e.find("video"))?"HTML5":"FLASH";d.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){e.parent().css("z-index",8)},videounsupported:function(){E();
d.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){E();d.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){G.seek(0)}},cuePoints:[{values:h.durationSeconds-1,type:"position",callback:function(b,h,d){b=d.durationSeconds-d.playheadTimeSeconds;e.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*b,.1,function(){e.parent().css({"background-color":"transparent","z-index":-1});E();a(this).show().css("opacity",1)})}}]})}function w(b){if("chromeful-video"===
b.type||"chromeless-video"===b.type){var e=g.getVideoHash(b.color,b.index,k);if(-1===e)return-1;if("chromeful-video"===b.type){b=b.thumbnailIndex+1;var d=J.width()/J.height(),c=parseInt(e.videoWidth,10),p=parseInt(e.videoHeight,10);g.updateAspectRatio(d,c,p,D);G?(G.show(),g.loadMediaIntoAiry(G,e,S,k.tabletWeb)):G=k.tabletWeb?B:g.createAiryInstanceForChromefulNotUseTabbedImmersiveView(D,e,S,null,k.autoplayVideo,J,x,y,b,k.useTabbedImmersiveView,A,F,I);b:if(g.useTabbedImmersiveView(k)){if(1<g.getVideosCount(m.getCurrentItem().color,
k)){if(g.isDefined(H)){x.show();break b}H=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(k.staticStrings.watchMoreVideos);x.find("#videoCaption").append(H);f.declarative.create(H,"videoIngressClick",h)}g.playVideoInImmersiveView(k,m.getCurrentItem().color)&&(f.declarative.create(D,"videoIngressClick",h),D.attr&&D.attr("data-ux-click",""),D.children().css("z-index","-1"),D.css("display","inline-block"))}else x.find("#videoCaption").text(k.staticStrings.playVideo),x.show();e=
G;k.autoplayVideo&&e&&!T&&(g.toggleVideoCaption(x),e.setVolume(0),e.show(),e.play(),T=!0)}else G?(G.show(),g.loadMediaIntoAiry(G,e,S,k.tabletWeb),G.play(),x.show()):(G=K(D,e,S))&&G.play()}}function C(b,e,m){var p=n(e);e=b;var l=g.isDefined(p)&&0<p.length&&k.alwaysIncludeVideo?1:0;g.isDefined(p)&&0<p.length&&!k.alwaysIncludeVideo&&b===k.maxAlts&&d.postCountMetric("IBVideoDrop");l&&b===k.maxAlts&&(y.find(".item:last").remove(),b--);g.isDefined(p)&&(a.each(p,function(e,c){if(b<k.maxAlts){var f=k.useChromelessVideoPlayer?
"chromeless-video":"chromeful-video",m={type:f,index:e,thumbnailIndex:b,variant:c.variant};h={type:"video-ingress",index:e,thumbnailIndex:b,variant:c.variant};g.useTabbedImmersiveView(k)&&("chromeful-video"===f&&(U+=" videoBlockIngress  videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb","")),k.altsOnLeft||(U+=" a-align-top"));g.createThumbnail(m,c.thumb,y,U);if(2===k.dp60VideoPosition){var l=y,m=k.dp60VideoPosition;if(0!==m){var B=l.children(".imageThumbnail"),l=l.children(".videoBlockIngress");
B&&l&&B[m-1]&&a(B[m-1]).before(l[0])}}g.useTabbedImmersiveView(k)&&(M(y.find(".videoBlockIngress img"),k.videoIngressATFSlateThumbURL),m=1<p.length?"multiple-videos":"one-video",(B=1<p.length?p.length+" "+k.staticStrings.multipleVideos:k.staticStrings.singleVideo)&&y.find(".videoBlockIngress").append(y.find("#videoCount_template").clone().text(B).attr("id","videoCount")).addClass(m));m=d.buildNexusMetric("ib.thumbnailImpression",b+1,c.mediaObjectId,c.groupType,A,F,I,R);d.emitNexusMetric(m);m=d.buildNexusMetric("ib.thumbnailRender",
b+1,c.mediaObjectId,c.groupType,A,F,I,R);d.emitNexusMetric(m);X||(X=!0,d.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(g.useTabbedImmersiveView(k))return!1}),c(y,e,b,m),k.imageBlockRenderingStartTime&&d.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",f.now()-k.imageBlockRenderingStartTime));return b}function M(a,b){var e=a.attr("src");if(e&&b){a.attr("src",b);var h=new Image;h.onload=function(b){a.attr("src",e)};h.src=
e}}function L(a){G&&G.pause();a.data=h;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";r.dispatch("imageClick",a);d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=d.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,k.videos[0].mediaObjectId,k.videos[0].groupType,A,F,I,R);d.emitNexusMetric(a);d.postCountMetric(b)}function N(a){B=a.player;B.hide=function(){B.pause();f.$("#main-video-container").find(".vse-player-container").hide()};
B.show=function(){f.$("#main-video-container").find(".vse-player-container").show();B.play()};B.getMediaSourceInfo=function(){return g.getMediaSourceInfo()}}var Q,k,m,r,y,D,x,J,H,G,S,h,e,B,F,A,I,R,V,X=!1,T=!1,U="videoThumbnail";return function(b,c,l,B){Q=this;k=b;m=c;r=B;S=k.airyConfig;I=k.contentWeblab&&k.contentWeblab+":"+k.contentWeblabTreatment;k.colorToVideo={};k.colorToVideo[k.landingAsinColor]=k.colorToVideo[k.defaultColor]=k.videos;k.tabletWeb?(V="tablet",R="applicationType.ImageBlock.vse_ib_tablet_web"):
f.capabilities.tablet?(V="tablet",f.capabilities.isAmazonApp&&(R="applicationType.ImageBlock.vse_ib_tablet_app")):(V="desktop",R="desktop_web.ImageBlock.vse_ib_iv");Q.render=function(b,h,d,c,l,B){O();y=c;D=l.find("#main-video-container");x=D.parent().find("#video-canvas-caption");J=a("#main-image-container");A=t.location.href;d=m.getCurrentItem().color;!0===B?F=k.mediaAsin:(F=k.colorToAsin[d]&&k.colorToAsin[d].asin,F=g.isDefined(F)?F:k.mediaAsin);k.useChromelessVideoPlayer||D.addClass("chromeful-container");
e=C(h,b,B);w(m.getCurrentItem());g.useTabbedImmersiveView(k)&&f.declarative("videoIngressClick",["click"],L);d=m.getCurrentItem().color;b=g.getVideoHash(d,0,k);-1!==b&&k.tabletWeb&&(b=g.getNilgiriServiceAjaxRequest(k,d,b),p.get(f,"#main-video-container",b,function(){f.$("#main-video-container").find(".vse-player-container").hide()},function(){f.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return e};Q.update=function(a){var b=a.data;"ingress"===b.type||g.lazyLoadingRequired(b,
m,k)||O();if("swatchHover"===a.type)b.color===m.getCurrentItem().color?w(m.getCurrentItem()):a.captured||g.lazyLoadingRequired(b,m,k)&&!g.lazyLoadOnHoverEnabled(k)&&w(m.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var c=g.getVideoHash(b.color,b.index,k);if("mouseenter"===a.type&&(d.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+e),"chromeless-video"===b.type)){var f=d.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,c.mediaObjectId,
c.groupType,A,F,I,R);d.emitNexusMetric(f)}w(b);k.usePeekHover&&"click"!==a.type||(g.selectGivenThumbnail(a.$declarativeParent,y),"click"===a.type&&(c=d.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,c.mediaObjectId,c.groupType,A,F,I,R),(!g.useTabbedImmersiveView(k)&&"chromeless-video"===b.type||"tablet"==V)&&d.emitNexusMetric(c),g.useTabbedImmersiveView(k)&&(d.emitNexusMetric(c),d.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+e),h.action="videoIngressClick",h.clickTimeStamp=
a.$event.timeStamp,h.$event=a.$event,h.$currentTarget=a.$currentTarget,r.dispatch("videoIngressClick",h),d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(k.isDPXFeatureEnabled)f.on("triggerVideoAjax",q);f.on("vsePlayer-imageblock_tablet",N)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(f,a,b,g,l,d,p,c){function q(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function n(){u.find("#ivTitle").click(function(){W.hide()})}function O(){P=Pa?{type:"360-spin"}:ba.getCurrentItem()}function E(){var a=u.find("#ivStage"),b=W.$container.find(".a-popover-wrapper"),e=b.find(".a-popover-inner"),b=b.height()-c.getDimension(e,"padding-top")-c.getDimension(e,"padding-bottom");u.css("height",b);var e=u.find("#ivTitle").outerHeight(!0),h=u.find("#ivVariationSelection").outerHeight(!0),d=u.find("#ivMediaSelection").outerHeight(!0),f=u.find("#ivThumbs"),
k=c.getDimension(f,"margin-top")+c.getDimension(f,"margin-bottom");f.css("height",b-e-h-d-k);u.find("#ivLargeImage").css("height",b);a.css("width",u.width()-c.getDimension(u,"padding-left")-c.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-c.getDimension(a,"margin-left")-c.getDimension(a,"margin-right"))}function K(){u.find("#ivMediaSelect").change(function(){var b=a(this).val();"all"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===
P.type&&u.find("#ivVideo_"+P.index).click()):"images"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===P.type&&(0===fa&&0===aa?u.find("#iv360").click():0===fa?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===b&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==P.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+P.index).click())})}function w(){var a=u.find("#ivStage").find("#ivLargeImage"),
b=a.width(),e=a.height(),h=a.find(".fullscreen");h.removeAttr("style");var d=h.width(),c=h.height();0<h.length&&(h[0].naturalWidth&&(d=h[0].naturalWidth),h[0].naturalHeight&&(c=h[0].naturalHeight));a.css("cursor","auto");var d=0===d?1:d,c=0===c?1:c,f=Math.min(b/d,e/c),k=c*f,m=d*f;1>f?(Qa?a.css("cursor","url('"+z.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;d=Math.min(m,d);c=Math.min(k-20,c);h.css({"margin-top":(e-
c)/2,"margin-left":(b-d)/2,height:c,width:d});a.css("visibility","visible");Aa=!1}function C(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();c.animateStageIn(b);b.append(a);w()}function M(){ga&&ga.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display","none");y()}function L(e){M();u.find("#ivLargeImage").css("display","block");var h;"hero-image"===e?b.isDefined(ka)&&(h=q(ka[P.index])):b.isDefined(la)&&
(h=q(la[P.index]));if(b.isDefined(h)){u.find(".fullscreen").remove();var d=a("\x3cimg\x3e").attr("src",h).addClass("fullscreen"),f=u.find("#ivLargeImage");c.animateStageOut(f,function(){d.load(function(){C(d)});if(d[0].complete)C(d);else{f.empty();var b=(f.height()-104)/2,e=(f.width()-80)/2;a("\x3cimg\x3e").attr("src",z.staticImages.spinner).css({position:"relative",top:b+"px",left:e+"px"}).appendTo(f)}})}}function N(){var a=parseInt(P.index,10)+1;a>=ha.length||u.find("#ivVideo_"+a).click()}function Q(){var a;
b.isDefined(ha)&&(a=ha[P.index]);if(b.isDefined(a)){M();var e=u.find("#ivLargeVideo").css("display","block");ga?(ga.isDetached()&&ga.attach(e[0]),b.loadMediaIntoAiry(ga,a,wa,z.tabletWeb),ga.show()):(ga=b.createAiryInstanceForChromeful(e,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&ga.bind("ended",N));ga.play({isAsync:!0})}}function k(){O();var a;a="hero-image"===P.type?u.find("#ivHeroImage_"+P.index):"image"===P.type?u.find("#ivImage_"+P.index):"chromeful-video"===P.type||"chromeless-video"===P.type?
u.find("#ivVideo_"+P.index):"360-spin"===P.type?u.find("#iv360"):b.isDefined(ka)?u.find("#ivHeroImage_"+P.index):u.find("#ivImage_"+P.index);b.isjQueryObjDefined(a)||(a=u.find("#ivImage_0"));m(a)}function m(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(P.type="chromeful-video",P.index=a.attr("id").split("_")[1],Q()):a.hasClass("ivHeroImage")?(P.type="hero-image",P.index=a.attr("id").split("_")[1],L(P.type)):a.hasClass("iv360Image")?(P.type="360-spin",
P.index=0,r()):(P.type="image",P.index=a.attr("id").split("_")[1],L(P.type))}function r(){M();u.find("#ivLarge360").css("display","block");G();var a=u.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});c.animateStageIn(a)},200);x();l.postCountMetric("dppc_click360");sa=Date.now()}function y(){0<sa&&(D("dppc_duration360",Date.now()-sa),sa=0)}function D(a,b){t.ue&&t.ue.count(a,b)}function x(){if(0<pa){var a=u.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function J(b,e){if(pa<b.length){var h=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:ra+"px"});h.hide();e.append(h);h.get(0).onload=function(){e.closest(document.documentElement).length&&(pa++,1===pa&&(x(),0<sa&&D("dppc_loadTime360",Date.now()-sa)),0<Ga&&D("dppc_perSpriteloadTime360",Date.now()-Ga),u.find("#iv360Spinner").hide(),h.show(),xa=5*Z.imageLocations[Math.floor(ya/Z.imageLocations[0].length)][ya%Z.imageLocations[0].length],J(b,e))};h.attr("src",b[pa].replace(/(\._SP)\d+(,)\d+/,
"$1"+ta+"$2"+ua));Ga=Date.now()}}function H(a){if(b.isDefined(Z.spriteWidthSizes)&&0<Z.spriteWidthSizes.length){var e=Z.spriteWidthSizes,h=e.length,d=e[0],c=e[h-1];if(a<=d)return d;if(a>c)return c;for(d=0;d<h;d++)if(a>e[d]&&a<=e[d+1])return e[d+1]}else return a}function G(){var b=u.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",
position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",z.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ha=!0,S())}function S(){if(b.isDefined(Z.spriteURLs)&&b.isDefined(u)&&Ha&&!Ia){var d=u.find("#ivLarge360"),c=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,
display:"block"});b.isDefined(Z.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",Z.staticImages.hint360).appendTo(c);a("\x3cdiv\x3e").css({"text-align":"center"}).text(z.staticStrings.dragToSpin).appendTo(c);c.appendTo(d);var c=Z.imageWidth,f=Z.imageHeight,k=d.parent().width(),m=d.parent().height(),g=0,p=0;c/f>k/m?(ta=H(k),ua=Math.round(f/c*ta),na=Math.ceil(k),ra=Math.ceil(ua/ta*k),p=(m-ra)/2):(ua=H(m),ta=Math.round(c/f*ua),ra=Math.ceil(m),
na=Math.ceil(ta/ua*m),g=(k-na)/2);d.css({"margin-left":g,"margin-top":p,width:na+"px",height:ra+"px",overflow:"hidden",position:"relative"});d.children("#image-360-sprites").css("width",6*na+"px");J(Z.spriteURLs,u.find("#image-360-sprites"),0);c=u.find("#ivLarge360");c.bind("mousedown",F);c.bind("touchstart",h);c.bind("touchmove",e);c.bind("touchend",B);a(document).bind("mousemove",A);a(document).bind("mouseup",I);b.isDefined(z.staticImages.grab)&&d.css("cursor","url('"+z.staticImages.grab+"'), auto");
Ia=!0}}function h(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function e(a){Ba&&(R(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function B(a){Ba&&(Ba=!1)}function F(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(z.staticImages.grabbing)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+z.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+z.staticImages.grabbing+"'), auto"));return!1}function A(a){Ca&&(R(a.originalEvent.clientX-
Ka),Ka=a.originalEvent.clientX)}function I(a){Ca&&(Ca=!1,b.isDefined(z.staticImages.grab)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+z.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function R(a){for(a=xa-=a/na*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var e;a=360;for(var h=0;h<pa;h++)for(var d=0;d<Z.imageLocations[h].length;d++){var c=Math.abs(xa-5*Z.imageLocations[h][d]);c<a&&(a=c,e=h*Z.imageLocations[0].length+d)}e!==ya&&(a=Math.floor(e/Z.imageLocations[0].length),
a!==Math.floor(ya/Z.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),h=u.find("#image-360-sprites").children(),La.drawImage(h[a],0,0)),a=u.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=e;a=e%Z.imageLocations[0].length*-1*na;e=-1*Math.floor(e/Z.imageLocations[0].length)*ra;h=u.find("#ivLarge360").children("#image-360-sprites");h.css("-webkit-transform","translate3d("+a+"px, "+
e+"px, 0)");h.css("transform","translate3d("+a+"px, "+e+"px, 0)")}function V(){u.delegate(".ivThumb","click",function(){var b=a(this);m(b)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");P.type="chromeful-video";P.index=b.attr("id").split("_")[1];Q()})}function X(){ga&&!ga.isDetached()&&(wa.volume=ga.getVolume(),ga.detach(),!document.all||t.atob||document.addEventListener||(ga=null));u.find("#ivLargeImage").empty();
y()}function T(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function U(b){var e=qa.left-(b.pageX-Da[0])*Ea;f.capabilities.rtl&&(e=qa.left-(a(t).width()-b.pageX-Da[0])*Ea);b=qa.top-(b.pageY-Da[1])*Ea;e=T(e,Fa.left);b=T(b,Fa.top);u.find(".fullscreen").css({left:e,top:b})}function ia(){u.delegate("#ivLargeImage","click",function(a){if(Aa)w();else if(za){u.find(".fullscreen").removeAttr("style");if(za){var b=u.find("#ivLargeImage"),e=b.find(".fullscreen");Qa?b.css("cursor","url('"+z.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var h=u.find("#ivLargeImage");Fa.left=h.width()-e.width();Fa.top=h.height()-e.height();var h=b.height()/2,d=b.width()/2;Da=[b.offset().left+d,b.offset().top+h];qa.top=h-e.height()/2;qa.left=d-e.width()/2;e.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(e.height()/b.height(),e.width()/b.width())}U(a)}});u.delegate("#ivLargeImage","mousemove",function(a){Aa&&U(a)})}function da(e){if(b.isImmersiveViewEnabled(z,
ba.getCurrentItem().color))if(Ma){var h=e.$event.originalEvent;h.acknowledge&&h.acknowledge(e.$currentTarget[0]);Pa=b.isDefined(e)&&"button-360-click"===e.action;d.isEnabled&&p.logImmersiveViewRequestServed(d);l.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(W))W.show();else{e=a("#auiImmersiveViewDiv");var h=a(t).height()-150,k=a(t).width()-75;W=Ma.create(e,{name:"immersiveView",activate:"onclick",width:k,height:h,popoverLabel:"ImmersiveView",hideHeader:!0});e.click()}if(Na){u=a("#ivMain");
e=ba.getCurrentItem().color;la=z.colorImages[e];ka=z.heroImage[e];ha=z.useChildVideos?z.colorToVideo[e]:z.videos;Oa=Y()&&z.spin360ColorEnabled[e];Z=Y()?z.spin360ColorData[e]:ea;O();ma=aa=oa=fa=0;b.isDefined(ka)&&(aa=ka.length);b.isDefined(la)&&(fa=la.length);b.isDefined(ha)&&(oa=ha.length);Oa&&(ma=1);c.populateTitle(u.find("#ivTitle"),45,z);c.populateVariationSelection(u.find("#ivVariationSelection"));e=u.find("#ivMediaSelect");0===fa+ma||0===oa?(e.parent().hide(),u.find("#ivThumbs").addClass("noMediaSelection")):
(e.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(z.staticStrings.allMedia+" ("+(aa+fa+ma+oa)+")").appendTo(e),a("\x3coption/\x3e").attr("value","images").text(z.staticStrings.images+" ("+(aa+fa+ma)+")").appendTo(e),a("\x3coption/\x3e").attr("value","videos").text(z.staticStrings.videos+" ("+oa+")").appendTo(e),e.parent().show(),e.val("all"));e=u.find("#ivThumbs");e.find(".ivRow").not(".placeholder").remove();for(var h=aa+fa+oa+ma,m=k=0;k<h;)for(var g=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),
B=0;3>B&&k<h;B++,k++,m++)if(m<aa){var n=ka[k].thumb,r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+k).appendTo(g);r.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(n)+'") center no-repeat')}else if(m>=aa&&m<fa+aa)n=la[k-aa].thumb,r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(k-aa)).appendTo(g),r.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(n)+
'") center no-repeat');else if(m>=aa+fa&&m<fa+aa+ma)r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(g),r.find(".ivThumbImage").css("background",'url("'+(b.isDefined(z.staticImages.icon360)?c.getResizedThumbnailURL(z.staticImages.icon360,!0):"")+'") center no-repeat');else if(n=ha[k-fa-aa-ma],r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(k-fa-aa-ma)).appendTo(g),
r.find(".ivThumbImage").css("background",'url("'+n.thumbUrl+'") center no-repeat'),b.isDefined(n)){var q={position:"triggerTop"},y=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");y.find(".ivVideoPopoverTitle").text(n.title);y.find(".ivVideoPopoverDuration").text(n.durationTimestamp);q.inlineContent=y[0];f.declarative.create(r,"a-tooltip",q)}e=u.find("#ivVideoList");e.find(".ivThumbVideoListOuter").not(".placeholder").remove();h=e.find(".placeholder");
for(k=0;k<oa;k++)m=ha[k],g=h.clone().removeClass("placeholder").appendTo(e),g.attr("id","ivVideoList_"+k),g.find(".ivThumbImage").css("background",'url("'+m.thumbUrl+'") center no-repeat'),g.find(".ivThumbTitle").text(m.title),g.find(".ivThumbDuration").text(m.durationTimestamp);u.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=z.airyConfig;Na=!1;Ra()}}else t.performance&&performance.now&&t.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else l.postCountMetric("immersiveViewNotExistsClickCount")}
function va(a){var e=z.colorToAsin[a],h={},d=500;if(e&&e.asin){h.params={asin:e.asin};var c="360"+e.asin,f=Date.now();h.success=function(e){D("dppc_asyncRequestTime360",Date.now()-f);e&&b.isDefined(e.spin360.spin360Model)?(b.ajaxState(c,"success"),z.spin360ColorData[a]=e.spin360.spin360Model,a===ba.getCurrentItem().color&&(Z=z.spin360ColorData[a],S())):h.error()};h.error=function(){l.postCountMetric("dppc_asyncFailed360");D("dppc_asyncRequestTime360",Date.now()-f);d*=2;16E3>=d?setTimeout(function(){f=
Date.now();g.load("/gp/product/features/apparel-main-image/360.html",h)},d):b.ajaxState(c,"fail")};b.ajaxState(c)&&"fail"!==b.ajaxState(c)||(g.load("/gp/product/features/apparel-main-image/360.html",h),b.ajaxState(c,"sent"))}}function Y(){return b.isDefined(z.spin360ConfigEnabled)&&z.spin360ConfigEnabled}var ca,z,ba,ja,W,u,ka,la,ha,aa,fa,oa,ma,P,ga,wa,Z,Oa,na,ra,ua,ta,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,sa=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa=
{},qa={},Ea,Da,Ma;v.when("a-modal").execute(function(a){Ma=a});var Ra=f.once(function(){K();V();ia();f.on("a:popover:afterUpdatePosition:immersiveView",E);f.on("a:popover:afterShow:immersiveView",k);f.on("a:popover:afterHide:immersiveView",X);n()});return function(e,h,k,m){ca=this;z=e;ba=h;d.refToModel=ba;ja=m;Y()&&(z.spin360ColorData[z.landingAsinColor]=z.spin360ColorData[z.defaultColor],z.spin360ColorEnabled[z.landingAsinColor]=z.spin360ColorEnabled[z.defaultColor]);b.isDefined(z.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",c.addStyleCodeToURL(z.staticImages.icon360,"_FMpng_RI_"));ca.render=function(a,e,h,d,c,k){Na=!0;Y()&&z.spin360ColorEnabled[a]&&!b.isDefined(z.spin360ColorData[a])&&(z.spin360ColorData[a]={},va(a));b.isImmersiveViewEnabled(z,ba.getCurrentItem().color)&&Y()&&z.spin360ColorEnabled[a]&&(e===z.maxAlts&&(a=d.find(".item.imageThumbnail"),h=d.find(".item.videoThumbnail"),b.isDefined(h)&&1<h.length?h.last().remove():a.last().remove(),
e--),a=d.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(a,"button-360-click"),d.append(a),e++,l.postCountMetric("dppc_display360"));return e};ca.update=function(a){};b.isImmersiveViewEnabled(z,ba.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");ja.register("imageClick",da);ja.register("button360Click",da)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric",
"postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(f,a,b,g,l,d,p){function c(){var b=K.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),d=b.find(".a-popover-inner"),b=b.height()-p.getDimension(d,"padding-top")-p.getDimension(d,"padding-bottom");a("#iv-tab-view-container").css("height",b);M=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<M?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),
d=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=d):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",b);f.trigger("dp:image-block:immersive-view:resize")}function q(){f.trigger("dp:image-block:immersive-view:reset")}function n(c){if(b.isImmersiveViewEnabled(E,K.getCurrentItem().color))if(N){var k=c.$event.originalEvent;k.acknowledge&&k.acknowledge(c.$currentTarget[0]);l.isEnabled&&d.logImmersiveViewRequestServed(l);
g.postCountMetric("dppc_immersiveViewOpened");b.isDefined(c)&&("button-360-click"===c.action?a("#iv360TabHeading").click():"videoIngressClick"===c.action?(L=c.clickTimeStamp,a("#ivVideosTabHeading").click()):"showroomIngressClick"===c.action?(L=c.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());k=K.getImmersiveViewModalInstance();if(b.isDefined(k))k.show();else{c=a("#auiImmersiveViewDiv");var k=Math.min(Math.max(a(t).height()-150,540),1080),p=Math.min(Math.max(a(t).width()-
75,990),1980),k=N.create(c,{name:"immersiveView",activate:"onclick",width:p,height:k,popoverLabel:"ImmersiveView",hideHeader:!0});K.setImmersiveViewModalInstance(k);c.click()}C&&(C=!1,Q(),f.trigger("dp:image-block:immersive-view:init"))}else t.performance&&performance.now&&t.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else g.postCountMetric("immersiveViewNotExistsClickCount")}var O,E,K,w,C=!0,M=0,L,N;v.when("a-modal").execute(function(a){N=
a});var Q=f.once(function(){f.on("a:popover:afterUpdatePosition:immersiveView",c);f.on("a:popover:afterShow:immersiveView",c);f.on("a:popover:afterHide:immersiveView",q)}),k=f.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(d){var c=b.filter(".iv-active");c.attr("id")!==a(this).attr("id")&&f.trigger("dp:ivTabs:"+c.find("a").attr("data-iv-tab-view")+":deselect",d);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();
c=a(this).find("a").attr("data-iv-tab-view");a("#"+c).show();"ivVideosTab"===c&&(d.clickTimeStamp=L||d.timeStamp);f.trigger("dp:ivTabs:"+c+":select",d);g.postCountMetric("dppc_"+c);return!1})});return function(a,d,c,f){O=this;E=a;K=d;l.refToModel=K;w=f;O.render=function(a,b,d,c,k,h){g.postCountMetric("dpcc_altThumbs_"+b);C=!0};O.update=function(a){};O.getTitle=function(){};O.getVariationSelectionInfo=function(){};k();b.isImmersiveViewEnabled(E,K.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");
w.register("imageClick",n);w.register("button360Click",n);b.useTabbedImmersiveView(E)&&(w.register("videoIngressClick",n),w.register("showroomIngressClick",n))}});"use strict";v.when("A").register("ImageBlockLoader",function(f){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;f.ajax(a,b)}}});"use strict";v.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(f,
a,b,g,l,d,p,c,q){function n(a){return null!==a&&"undefined"!==typeof a}function O(b){var e=0;a.each(b,function(a,b){var h=parseInt(b[1],10);h>e&&(e=h)});return e}function E(b){var e=0;a.each(b,function(a,b){var h=parseInt(b[0],10);h>e&&(e=h)});return e}function v(a,b,d){b=b.width();if(d.naturalMainImageSize)return b;a=O(a);0<a&&(b=Math.min(b,a));return b}function w(a,b,d){b=b.height();if(d.naturalMainImageSize)return b;a=E(a);0<a&&(b=Math.min(b,a));return b}function C(b){var e;a.each(b,function(a,
b){n(e)||(e=b[1]/b[0])});return e||1}function M(d,e,c,k,f,m,p,l,n,q,r,y,D){var w=a.extend({},c.foresterMetadataParams);null!==k&&(w.method+="."+k);var E=[];e.disabledViewIds&&(E=e.disabledViewIds);return b.embed({parentElement:d[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:c.swfUrl,foresterMetadataParams:w,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},
videoAds:c.videoAds,bindings:{play:function(){if("ImmersiveView"===k)x||(x=!0,g.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(J||(J=!0,g.postCountMetric("dppc_chromefulVideoPlayedPV")),!q){var a=g.buildNexusMetric("ib.thumbnailClick",n,e.mediaObjectId,e.groupType,r,y,D);g.emitNexusMetric(a)}}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,b,e){f&&(L(0,m,l),N(p))}}],disabledViewIds:E})}function L(a,b,d){b.fadeTo(500,0,function(){Q(a,d);b.fadeTo(500,1)})}function N(a){a&&
a.toggle()}function Q(b,e){var d=e.find("img");n(d[b])&&a(d[b]).click()}function k(a,b){S[a]=b?b:S[a];return S[a]}function m(b,e,d){d=d||G;d=d.colorImages;if(1>d.length||!n(d[b])||!n(e))return-1;var c=-1;a.each(d[b],function(a,b){b.variant===e&&(c=a)});return c}function r(b,e,d){d=d||G;d=d.colorImages;return!(n(d)&&n(d[b])&&n(d[b][e])&&n(d[b][e].main))||1>a.map(d[b][e].main,function(a,b){return b}).length?-1:d[b][e]}function y(a,b,d,c){c.parent().css("z-index",2);0!==d&&0!==b&&(b/=d,a>b?c.css("width",
b/a*100+"%"):c.css("height",a/b*100+"%"))}function D(b,e){var d;if(d=b.useIV)d=b.colorImages&&b.colorImages[e]&&0<b.colorImages[e].length?!0:!1;p.isEnabled&&(p.IVApplicaple=d,c.logImmersiveViewApplicability(a,p));return d}var x,J,H,G=a.extend(!0,{},l,d),S={};return{isDefined:n,isDefinedAndEmpty:function(a){return n(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return n(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return n(a)?
"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:C,getMaxHeightOfMainImage:w,getMaxWidthOfMainImage:v,getMaxDimensionsOfMainImage:function(a,b,d){if(d.acEnabled)return[b.height(),b.width()];var c=w(a,b,d);b=v(a,b,d);a=C(a);d=b/a;b=Math.min(b,c*a);c=Math.min(c,d);return[c,b]},getContainerHeight:function(a,b,d){var c=a.get(0);a=0;if(n(c)){a=c.offsetWidth/b;a=Math.min(a,d);var k;b=G.mainImageHeightPartitions;d=G.mainImageMaxSizes;if(n(d)&&
n(b)){for(var f=0,g=t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=0;c<b.length;c++)g>b[c]&&(f=c+1);d.length>=f&&(k=d[f])}n(k)&&(a=Math.min(k[1],a))}return a},getColorFromState:function(b,d){if(b){d=d||G;var c="";a.each(d.visualDimensions,function(a,d){b[d]&&(c+=" "+b[d])});return c&&c.substring(1)}},createThumbnail:function(a,b,d,c){var k=d.find(".template").clone().removeClass("template").addClass("item"),g=document.createElement("img");g.src=b;k.find(".placeHolder").replaceWith(g);
(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&k.addClass("heroImageThumbnail");n(c)&&k.addClass(c);f.declarative.create(k,"thumb-action",a);k.attr&&k.attr("data-ux-click","");d.append(k)},selectGivenThumbnail:function(a,b){var d=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");d.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,d,c,k,f,g,m){M(a,b,d,c,k,f,g,m,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:M,
loadMediaIntoAiry:function(a,b,d,c){a&&a.getMediaSourceInfo()!==b.url&&(c?a.loadMedia?(H={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(H)):a.play({videoUrl:b.url,mimeType:"video/mp4",contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"}):a.loadMedia?a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}):a.play({videoUrl:b.url,
mimeType:"video/mp4",contentId:b.mediaObjectId}))},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:L,toggleVideoCaption:N,selectThumbnail:Q,spinner:function(b,d){var c=a("#imageBlock .a-spinner").parent();0===c.length&&(c=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),
b.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));d?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:k,getIndexForVariant:m,getImageHash:r,lazyLoadingRequired:function(a,b,d){b=Math.max(m(a.color,
b.getCurrentItem().variant,d),0);b=-1!==r(a.color,b,d);a=d.colorToAsin[a.color]&&d.colorToAsin[a.color].asin;a=!a||"success"!==k(a);return!d.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:y,repositionVideoBanner:function(a,b,d,c){setTimeout(function(){var d=a.width()/a.height();y(d,16,9,b)},c||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:
0},getVideoHash:function(a,b,d){if(d.useChildVideos){if(!n(d.colorToVideo))return-1;a=d.colorToVideo[a]}else a=d.videos;return n(a)&&n(a[b])&&n(a[b].url)?a[b]:-1},isImmersiveViewEnabled:D,playVideoInImmersiveView:function(a,b){return D(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return n(H)?H.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,d){return{requester:"DetailPageTablet",marketplaceID:d.marketPlaceID,
clientPrefix:"ImageBlock_tablet",locale:d.languageCode,page:"DetailPageTablet",placement:"ImageBlock",video:{videoURL:d.url,imageURL:d.slateUrl}}},addTag:function(a){t.ue&&t.ue.tag&&t.ue.tag(a)},isShoppableScenesEnabled:function(){return q.isEnabled&&0<a(".mirai-scene-image-block-template").length}}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(f,a,b,g){function l(d,c,f,l){if(!b.isjQueryObjDefined(d.find(".a-button-selected"))){var n=
C.getCurrentItem();if(!l||"chromeless-video"!==n.type||!w.autoplayVideo){l=0;if("hero-image"===n.type){l=p(n.color,n.variant);if(-1===l)return;l=-1!==l?l:0}var q=c+l;q>=f&&(l=0,q=c);c=g.getHeroImageHash(w,n.color,l);-1!==c&&(M.dispatch("updateModel",{data:{index:l,thumbnailIndex:q,variant:c.variant,type:"hero-image"}}),c=d.find(".item").get(q),b.selectGivenThumbnail(a(c),d))}}}function d(d,c,f){if("hero-video"===C.getCurrentItem().type)return d;c=w.heroImage&&w.heroImage[c];var g=d;b.isDefined(c)&&
(a.each(c,function(a,c){d<w.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:d,variant:c.variant},c.thumb,L,"imageThumbnail"),d++)}),l(L,g,d,f));return d}function p(d,c){var f=w.heroImage;if(1>f.length||!b.isDefined(f[d])||!b.isDefined(c))return-1;var g=-1;a.each(f[d],function(a,b){b.variant===c&&(g=a)});return g}function c(){if(N.length&&w.repositionHeroImage){var a=g.getHeroDimParams(w,C.getCurrentItem()),d;b.isDefined(a)&&(d=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+
a.yPos+"px ",N.css({"background-position":d,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function q(a,d,c,f){if(N.length&&a&&d){if("function"===typeof c||f){var p=new Image;p.onload=f?function(){N.css("background-image",'url("'+a+'")')}:c;p.src=a}c=d[1];var p=d[0],l;f||N.css({"background-image":'url("'+a+'")'});w.repositionHeroImage&&(d=g.getHeroDimParams(w,C.getCurrentItem(),d),b.isDefined(d)&&(c=d.width,p=d.height,
l=b.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px "));N.css({"background-position":l,"background-size":c+"px "+p+"px ","max-width":c+"px ","min-height":p+"px ",filter:"","-ms-filter":""})}}function n(b,d,c,f){b=g.getHeroImageHash(w,b,d);if(-1===b)return-1;d=a.map(b.main,function(a,b){return b})[0];q(d,b.main[d],c,f)}function t(a,b,d){if("hero-image"!==a.type)return-1;var c=p(a.color,C.getCurrentItem().variant),c=-1!==c?c:0;if(-1===g.getHeroImageHash(w,a.color,c))return-1;var f=
C.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=c;E(a,b,d)}function E(a,b,d){var c=g.getHeroImageHash(w,a.color,a.index),p;p=a&&Q&&f.equals(a,Q)?!0:!1;Q||(Q=a);if(!p&&a||b)n(a.color,a.index,b,d),Q=a;N.removeClass("hide-background");f.trigger("dp:image-block:update",c)}var v,w,C,M,L,N,Q={};return function(f,g,p,l){v=this;w=f;C=g;M=l;w.heroImage[w.landingAsinColor]=w.heroImage[w.defaultColor];v.render=function(b,c,f,g,k,p,h){L=g;N=a("#heroImage");b=d(c,
b,p);t(C.getCurrentItem(),h,p);return b};v.update=function(a){var d=a.data;"ingress"!==d.type&&N.addClass("hide-background");"swatchHover"===a.type?a.captured||(d.type=C.getCurrentItem().type,-1!==t(d)&&(a.captured=!0)):"hero-image"===d.type&&(E(d),"click"!==a.type&&w.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,L))};M.register("resize",c)}});"use strict";v.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(f,a,b){var g,l,d,p;return function(a,q,n,
t){g=this;l=a;d=t;g.render=function(a,d,c,n,q,t,v){p=n;g=this;c=l.maxAlts;n=d;q=l.colorImages[a]?l.colorImages[a].length:0;q+=b.getVideosCount(a,l);a=l.heroImage[a];t=0;a&&(t=a.length);a=q+t;a>c&&(c=a-c,a=p.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),c+="+",n={type:"ingress",index:0,thumbnailIndex:d,variant:""},a.find("#altIngressText").append(c),f.declarative.create(a,"thumb-action",n),p.append(a),n=d++);return n};g.update=function(a){"ingress"===
a.data.type&&"click"===a.type&&d.dispatch("imageClick",a)}}});"use strict";v.when("imageBlockUtils").register("ImageBlockState",function(f){return function(a,b,g){this.getImageHash=function(b){var d=g.getCurrentItem();b=f.getIndexForVariant(d.color,b||"MAIN",a);return f.getImageHash(d.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});"use strict";v.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(f,a){function b(a,b){var c;if(b.repositionHeroImage){c=a[1];var f=a[0];if(768>=(t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,f*=.7;else{var g=((t.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,g=Math.max(Math.min(g,1),0);c*=.7+.3*g;f*=.7+.3*g}c=[c,f]}return c}function g(b,f,c){var g;if(c.repositionHeroImage){var l=t.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c=c.heroFocalPoint;
if(a.isDefined(c)){g=Math.max((l-Math.min(1500,b))/2,0);var v=Math.max((l-b)/2,0);g-=v;l=Math.max(Math.min(l,1500),1024);g=g+(l-420-23)/2-b/f[1]*c}}return g}function l(b,g,c){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[g])&&a.isDefined(b[g][c])&&a.isDefined(b[g][c].main))||1>f.map(b[g][c].main,function(a,b){return b}).length?-1:b[g][c]}return{getHeroImageHash:l,getHeroDimParams:function(d,p,c){if(d.repositionHeroImage){if(!a.isDefined(c)){c=l(d,p.color,p.index);if(-1===c)return;p=f.map(c.main,
function(a,b){return b})[0];c=c.main[p]}p=b(c,d);d=g(p[0],c,d);return{height:p[1],width:p[0],xPos:d,yPos:75}}}}});"use strict";v.when("postMetric").register("ImageBlockImmersiveViewShowroom",function(f){function a(){this.render=function(){};this.update=function(){}}return function(b,g,l,d){var p=!1,c=new a;v.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(a){a!==ea&&(p=!0,c=new a(b,g,l,d))});b&&!0===b.showroomEnabled&&!1===p&&f.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");
return c}});"use strict";v.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(f,a,b){function g(a,g){var c=f.copy(a);if(b.isDefined(a)&&a.length>g){try{for(var l=-1,n=0;n<a.length;n++){var t=a.charAt(n);if(" "===t||"."===t||"?"===t||";"===t||","===t||":"===t)l=n;if(n===g-4){c=a.substring(0,-1===l?n:l);break}}}catch(v){c=a.substring(0,g-3)}c+="..."}return c}function l(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,
c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c},attachTabSelectHandler:function(a,b){f.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){f.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){f.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){f.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){f.on("a:popover:afterHide:immersiveView",
a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:l,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return l(a,c)},populateVariationSelection:function(d){if(b.isDefined(t.DetailPage)&&b.isDefined(t.DetailPage.StateController)){d.empty();
var f=t.DetailPage.StateController.getState(),c=f.variation_label_order,g;for(g in c)if(c.hasOwnProperty(g)){var l=c[g],v=f.selected_variations[l],l=f.variation_display_labels[l];v&&a("\x3cdiv/\x3e").addClass("ivVariations").text(l+":"+v).appendTo(d)}}},populateTitle:function(a,b,c){a.html(c.title);a.attr("title",a.text());a.html(g(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,c,f){t.ueLogError&&
t.ueLogError(f,{logLevel:a,attribution:b,message:c})}}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(f,a,b,g,l){function d(){l.populateTitle(r.find("#ivTitle"),160,k)}function p(){var a=m.getCurrentItem().color;D=k.colorImages[a];y=k.heroImage[a];x=J=0;b.isDefined(y)&&(x=y.length);b.isDefined(D)&&(J=D.length)}function c(a){return a.hiRes||a.large||a.main[a.main.length-1]}function q(){var a=r.find("#ivStage").find("#ivLargeImage"),
b=a.width(),d=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var f=c.width(),g=c.height();0<c.length&&(c[0].naturalWidth&&(f=c[0].naturalWidth),c[0].naturalHeight&&(g=c[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,g=0===g?1:g,l=Math.min(b/f,d/g),p=g*l,m=f*l;1>l?(G?a.css("cursor","url('"+k.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),e=!0):e=!1;f=Math.min(m,f);g=Math.min(p-20,g);c.css({"margin-top":(d-
g)/2,"margin-left":(b-f)/2,height:g,width:f});a.css("visibility","visible");h=!1}function n(a){var b=r.find("#ivLargeImage");b.css("visibility","hidden");b.empty();l.animateStageIn(b);b.append(a);q()}function t(d){r.find("#ivLargeImage").css("display","none");r.find("#ivLargeImage").css("display","block");var e;"hero-image"===d?b.isDefined(y)&&(e=c(y[H.index])):b.isDefined(D)&&(e=c(D[H.index]));if(b.isDefined(e)){r.find(".fullscreen").remove();var f=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),
g=r.find("#ivLargeImage");l.animateStageOut(g,function(){f.load(function(){n(f)});if(f[0].complete)n(f);else{g.empty();var b=(g.height()-104)/2,d=(g.width()-80)/2;a("\x3cimg\x3e").attr("src",k.staticImages.spinner).css({position:"relative",top:b+"px",left:d+"px"}).appendTo(g)}})}}function v(a){r.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?H.type="hero-image":H.type="image";H.index=a.attr("id").split("_")[1];t(H.type);g.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(H.index,10)+1)+"_"+(x+J))}function K(){r.delegate(".ivThumb","click",function(){var b=a(this);v(b)})}function w(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function C(a){var b=F.top-(a.pageY-I[1])*A;a=w(F.left-(a.pageX-I[0])*A,B.left);b=w(b,B.top);r.find(".fullscreen").css({left:a,top:b})}function M(){r.delegate("#ivLargeImage","click",function(a){if(h)q();else if(e){r.find(".fullscreen").removeAttr("style");if(e){var b=r.find("#ivLargeImage"),d=b.find(".fullscreen");G?b.css("cursor",
"url('"+k.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));h=!0;var c=r.find("#ivLargeImage");B.left=c.width()-d.width();B.top=c.height()-d.height();var c=b.height()/2,f=b.width()/2;I=[b.offset().left+f,b.offset().top+c];F.top=c-d.height()/2;F.left=f-d.width()/2;d.css({position:"relative",left:F.left,top:F.top});A=Math.max(d.height()/b.height(),d.width()/b.width())}C(a);g.postCountMetric("dpcc_iv_largeImageCLick")}});
r.delegate("#ivLargeImage","mousemove",function(a){h&&C(a)})}function L(){r.find("#ivLargeImage").empty()}function N(c){if(S){r=a("#ivMain");p();H=m.getCurrentItem();d();l.populateVariationSelection(r.find("#ivVariationSelection"));c=r.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=x+J,f=0,g=0;f<e;)for(var h=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),k=0;4>k&&f<e;k++,f++,g++)if(g<x){var n=y[f].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+f).appendTo(h);q.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(n)+'") center no-repeat')}else g>=x&&g<J+x&&(n=D[f-x].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-x)).appendTo(h),q.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(n)+'") center no-repeat'));R();S=!1}else d();c=a("#ivImagesTab").height();r.css("height",c);e=r.find("#ivTitle").outerHeight(!0);f=r.find("#ivVariationSelection").outerHeight(!0);
g=r.find("#ivThumbs");h=l.getDimension(g,"margin-top")+l.getDimension(g,"margin-bottom");g.css("height",c-e-f-h);r.find("#ivLargeImage").css("height",c);c=r.find("#ivStage");e=r[0]&&r[0].getBoundingClientRect&&Math.floor(r[0].getBoundingClientRect().width)||r.width();c.css("width",e-l.getDimension(r,"padding-left")-l.getDimension(r,"padding-right")-r.find("#ivThumbColumn").width()-l.getDimension(c,"margin-left")-l.getDimension(c,"margin-right"));H=m.getCurrentItem();c="hero-image"===H.type?r.find("#ivHeroImage_"+
H.index):"image"===H.type?r.find("#ivImage_"+H.index):b.isDefined(y)?r.find("#ivHeroImage_"+H.index):r.find("#ivImage_"+H.index);b.isjQueryObjDefined(c)||(c=r.find("#ivImage_0"));v(c)}var Q,k,m,r,y,D,x,J,H,G=navigator.userAgent.match(/msie|trident/i),S=!0,h=!1,e=!1,B={},F={},A,I,S=!0,R=f.once(function(){K();M();l.attachImmersiveViewResizeHandler(N);l.attachTabDeselectHandler("ivImagesTab",L)});return function(b,c,d,e){Q=this;k=b;m=c;Q.render=function(b,c,d,e,f,g){S=!0;p();0===x+J?l.hideTabHeading("ivImagesTabHeading"):
l.unhideTabHeading("ivImagesTabHeading");1===x+J?a("#ivThumbs").hide():a("#ivThumbs").show()};Q.update=function(a){};l.attachTabSelectHandler("ivImagesTab",N)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(f,a,b,g,l,d,p){function c(){x.delegate(".ivThumb","click",function(){var b=a(this);x.find(".ivThumb").removeClass("selected");b.addClass("selected");
b.hasClass("ivThumbVideo")&&(J.type="chromeful-video",J.index=b.attr("id").split("_")[1])})}function q(){if(da){var b=a("#ivVideosTab").height();x.css("height",b);var c=x.find(".vse-lb-container");H=b-l.getDimension(c,"padding-top")-l.getDimension(c,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(X){x.css({"max-width":Math.floor(1.77*H)});return}var b=x.find(".vse-player-container"),c=x.find(".vse-video-action-strip"),d=x.find(".vse-lb-video-metadata"),e=Math.floor(H-l.getDimension(d,
"height")-l.getDimension(c,"height")),f=Math.floor(1.77*e);b.css({"max-height":e,"max-width":f,marginLeft:"auto",marginRight:"auto"});d.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}T&&(b=x.find(".vse-vertical-scroll"),c=l.getDimension(b,"margin-top")+l.getDimension(b,"margin-bottom"),b.css("max-height",H-c))}function n(){v();G&&G.pause();U=!1;R=!0;B=null;ia=!0;da=!1}function v(){U=!1;G&&G.pause()}function E(c){B=c.clickTimeStamp?
c.clickTimeStamp:f.now();b.isDefined(D)&&(D.eventTimestamp=B);U=!0;V&&(p.get(f,"#ivVideoBlock",y,W,u),x=a("#ivVideoBlock"),r.getCurrentItem(),J=r.getCurrentItem(),z(),N());q();V=!1;C()}function K(b){V&&(x=a("#ivVideoBlock"),r.getCurrentItem(),J=r.getCurrentItem(),z());U&&C();q()}function w(a){G=a.player;g.postTimeMetric("vse_ib_desktop_player_initialisation_duration",f.now()-ca);m.imageBlockRenderingStartTime&&g.postTimeMetric("vse_ib_desktop_time_to_player_interactive",f.now()-m.imageBlockRenderingStartTime);
da&&(N(),C())}function C(){if(G&&U&&(x.find(".vse-lb-container").animate({opacity:1},200),G.play(D),g.postCountMetric("dpcc_vse_videoBlock_video_played"),R)){var a=t.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,g.postTimeMetric("dpcc_vse_vitff",a),R=!1)}}function M(){f.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function L(a){S=a.popover.$popover;da=!0;N()}function N(){if(da&&ia&&U&&G){S.addClass(f.$(S).find(".vse-lb-container").data("cssClass"));var a=D;ea&&
(a=Y,ea=!1);f.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:a});q();ia=!1}}function Q(a){document.getElementsByClassName("videoBlockIngress")[0].click();Y=a;ea=!0}var k,m,r,y,D,x,J,H,G,S,h,e,B,F,A,I,R=!0,V=!0,X=!1,T=!1,U=!1,ia=!0,da=!1,ea=!1,Y,ca=0,z=f.once(function(){c();l.attachImmersiveViewResizeHandler(K);l.attachTabDeselectHandler("ivVideosTab",v);l.attachImmersiveViewResetHandler(n)}),ba=function(c,d,e){a("#ivVideoBlockSpinner").addClass("aok-hidden");
g.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);c=r.getCurrentItem().color;c=b.getVideoHash(c,0,m);G||(G=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),c,m.airyConfig,"ImmersiveView"));X=!0;a("#ivVideoBlock").css({"max-width":1.77*H,margin:"0 auto"});U&&X&&G.play({isAsync:!0})},ja=function(b,c,d){V||p.get(b,"#ivVideoBlock",y,W,u);a("#ivVideoBlockSpinner").addClass("aok-hidden")},W=function(a,b,c){T=!0;q()},u=function(a,b,c){g.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+
b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,g,p){k=this;m=a;r=c;k.render=function(a,c,g,k,p,n){a=r.getCurrentItem().color;c=b.getVideoHash(a,0,m);!0===n?h=m.mediaAsin:(h=m.colorToAsin[a]&&m.colorToAsin[a].asin,h=b.isDefined(h)?h:m.mediaAsin);e=null!==m.vseVideoDataSourceTreatment&&"T1"===m.vseVideoDataSourceTreatment?"ASIN":"physicalID";F=m.contentWeblab;A=m.contentWeblabTreatment;I=m.parentAsin||"";V=!0;-1===c?l.hideTabHeading("ivVideosTabHeading"):(l.unhideTabHeading("ivVideosTabHeading"),
y={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:h,contentIDType:"ASIN",parentContentID:I,parentContentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:e,videoURL:c.url,imageURL:c.slateUrl},requestId:m.dpRequestId,weblabContext:[{name:F,assignment:A,ignoreForG2S2Key:!0}],metadata:{ProductTitle:m.title}},D={videoUrl:y.video.videoURL,contentId:y.video.contentID,duration:0,vendorCode:"",eventTimestamp:b.isDefined(B)?
B:f.now(),imageUrl:y.video.imageURL,productAsin:y.product.contentID,index:0},b.isDefinedAndNotEmpty(G)&&(G.destroy(),G=null),ca=f.now(),d.get(f,"#ivVideoBlock",y,ja,ba))};k.update=function(a){};l.attachTabSelectHandler("ivVideosTab",E);f.on("vsePlayer-detailpage-imageblock",w);f.on("a:popover:afterShow:immersiveView",L);f.on("a:popover:beforeHide:immersiveView",M);f.on("detailpage-imageblock-leave-pip",Q)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric",
"imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(f,a,b,g,l,d,p,c,q){function n(){var b=a("#iv360Tab").height();A.css("height",b);var c=A.find("#ivTitle360").outerHeight(!0),d=A.find("#ivVariationSelection360").outerHeight(!0),e=A.find("#ivThumbs360"),f=p.getDimension(e,"margin-top")+p.getDimension(e,"margin-bottom");e.css("height",b-c-d-f);b=A.find("#ivStage360");c=A[0]&&A[0].getBoundingClientRect&&Math.floor(A[0].getBoundingClientRect().width)||
A.width();b.css("width",c-p.getDimension(A,"padding-left")-p.getDimension(A,"padding-right")-A.find("#ivThumbColumn360").width()-p.getDimension(b,"margin-left")-p.getDimension(b,"margin-right"))}function t(){C();var a=A.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});p.animateStageIn(a)},200);v()}function v(){if(0<u){var a=A.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function K(b,c){if(u<b.length){var f=a("\x3cimg /\x3e").css({display:"block",
width:6*R+"px",height:V+"px"});f.hide();c.append(f);f.get(0).onload=function(){c.closest(document.documentElement).length&&(u++,1===u&&(v(),0<z&&(l.time("dppc_loadTime360",Date.now()-z,e.mediaAsin),d.postTimeMetric("dppc_loadTime360",Date.now()-z))),0<ba&&(l.time("dppc_perSpriteloadTime360",Date.now()-ba,e.mediaAsin),d.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ba)),A.find("#iv360Spinner").hide(),f.show(),Y=5*I.imageLocations[Math.floor(ca/I.imageLocations[0].length)][ca%I.imageLocations[0].length],
K(b,c))};f.attr("src",b[u].replace(/(\._SP)\d+(,)\d+/,"$1"+T+"$2"+X));ba=Date.now()}}function w(a){if(b.isDefined(I.spriteWidthSizes)&&0<I.spriteWidthSizes.length){var c=I.spriteWidthSizes,d=c.length,e=c[0],f=c[d-1];if(a<=e)return e;if(a>f)return f;for(e=0;e<d;e++)if(a>c[e]&&a<=c[e+1])return c[e+1]}else return a}function C(){var b=A.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),
height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",e.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),da=!0,M())}function M(){if(b.isDefined(I.spriteURLs)&&b.isDefined(A)&&da&&!va){var c=A.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(I.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",I.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(e.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=I.imageWidth,f=I.imageHeight,g=c.parent().width(),h=c.parent().height(),l=0,p=0;d/f>g/h?(T=w(g),X=Math.round(f/d*T),R=Math.ceil(g),V=Math.ceil(X/T*g),p=(h-V)/2):(X=w(h),T=Math.round(d/
f*X),V=Math.ceil(h),R=Math.ceil(T/X*h),l=(g-R)/2);c.css({"margin-left":l,"margin-top":p,width:R+"px",height:V+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*R+"px");K(I.spriteURLs,A.find("#image-360-sprites"),0);d=A.find("#ivLarge360");d.bind("mousedown",k);d.bind("touchstart",L);d.bind("touchmove",N);d.bind("touchend",Q);a(document).bind("mousemove",m);a(document).bind("mouseup",r);b.isDefined(e.staticImages.grab)&&c.css("cursor","url('"+e.staticImages.grab+
"'), auto");va=!0}}function L(a){W=!0;ia=a.originalEvent.targetTouches[0].clientX}function N(a){W&&(y(a.originalEvent.targetTouches[0].clientX-ia),ia=a.originalEvent.targetTouches[0].clientX)}function Q(a){W&&(W=!1)}function k(a){ja=!0;U=a.originalEvent.clientX;b.isDefined(e.staticImages.grabbing)&&(a=A.find("#ivLarge360"),a.css("cursor","url('"+e.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+e.staticImages.grabbing+"'), auto"));return!1}function m(a){ja&&
(y(a.originalEvent.clientX-U),U=a.originalEvent.clientX)}function r(a){ja&&(ja=!1,b.isDefined(e.staticImages.grab)&&(a=A.find("#ivLarge360"),a.css("cursor","url('"+e.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function y(a){Y-=a/R*180;la&&(l.count("dppc_360dragToSpin",e.mediaAsin),d.postCountMetric("dppc_360dragToSpin"));la=!1;for(a=Y;0>a;)a+=360;for(;360<a;)a-=360;Y=a;var c;a=360;for(var f=0;f<u;f++)for(var g=0;g<I.imageLocations[f].length;g++){var h=Math.abs(Y-
5*I.imageLocations[f][g]);h<a&&(a=h,c=f*I.imageLocations[0].length+g)}c!==ca&&(a=Math.floor(c/I.imageLocations[0].length),a!==Math.floor(ca/I.imageLocations[0].length)&&(b.isDefined(ka)||(ka=document.createElement("canvas").getContext("2d")),f=A.find("#image-360-sprites").children(),ka.drawImage(f[a],0,0)),a=A.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ca=c;a=c%I.imageLocations[0].length*-1*R;c=-1*Math.floor(c/I.imageLocations[0].length)*
V;f=A.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");f.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function D(){if(aa){A=a("#ivMain360");var b=B.getCurrentItem().color;J()&&H(b);I=J()?e.spin360ColorData[b]:ea;p.populateTitle(A.find("#ivTitle360"),160,e);p.populateVariationSelection(A.find("#ivVariationSelection360"));A.find("#ivLarge360").empty();u=0;va=da=!1;ca=Y=0;fa();aa=!1}0!==a("#iv360Tab").height()&&(p.detachImmersiveViewResizeHandler(D),
n(),t(),z=Date.now(),ha=la=!0,l.count("dppc_click360",e.mediaAsin),d.postCountMetric("dppc_click360"))}function x(a,f,h){a=e.colorToAsin[h];var k={},p=500;if(!a||!a.asin)if(h===e.defaultColor)a={asin:e.winningAsin};else return;k.params={asin:a.asin};var m="360"+a.asin,n=Date.now();k.success=function(a){l.time("dppc_asyncRequestTime360",Date.now()-n,e.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",Date.now()-n);a&&b.isDefined(a.spin360)?((a=a.spin360.spin360Model)&&c.setData(a),b.ajaxState(m,
"success")):k.error()};k.error=function(){l.count("dppc_asyncFailedTransient360",e.mediaAsin);d.postCountMetric("dppc_asyncFailedTransient360");l.time("dppc_asyncRequestTime360",Date.now()-n,e.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",Date.now()-n);p*=2;16E3>=p?setTimeout(function(){n=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",k)},p):(l.count("dppc_asyncFailed360",e.mediaAsin),d.postCountMetric("dppc_asyncFailed360"),b.ajaxState(m,"fail"))};b.ajaxState(m)&&"fail"!==
b.ajaxState(m)||(g.load("/gp/product/features/apparel-main-image/360.html",k),b.ajaxState(m,"sent"))}function J(){return e&&b.isDefined(e.spin360ConfigEnabled)&&e.spin360ConfigEnabled}function H(a){return b.isDefinedAndNotEmpty(e.spin360ColorData[a])?!0:b.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled}function G(){ha&&(l.time("dppc_duration360",Date.now()-z,e.mediaAsin),d.postTimeMetric("dppc_duration360",Date.now()-z),ha=!1)}function S(a){a=e.colorToAsin[a.color]&&e.colorToAsin[a.color].asin;
a||(a=e.mediaAsin);return a}var h,e,B,F,A,I,R,V,X,T,U,ia,da=!1,va=!1,Y=0,ca=0,z=0,ba=0,ja=!1,W=!1,u=0,ka,la=!0,ha=!1,aa=!0,fa=f.once(function(){p.attachImmersiveViewResizeHandler(D);p.attachImmersiveViewResizeHandler(n);p.attachImmersiveViewResetHandler(G);p.attachTabDeselectHandler("iv360Tab",G)});return function(g,k,m,n){h=this;e=g;B=k;F=n;g=e.landingAsinColor;k=e.defaultColor;b.isDefined(e.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
p.addStyleCodeToURL(e.staticImages.icon360,"_FMpng_RI_"));J()&&(e.spin360ColorData||(e.spin360ColorData={}),g===k&&b.isDefinedAndEmpty(e.spin360ColorData[k])&&delete e.spin360ColorData[k]);f.on(q.TWISTER_DATA_EVENT,function(a){S(B.getCurrentItem())===a&&(I=c.getData(a),M(),a={type:"updatedData",data:B.getCurrentItem()},F.dispatch("updateView",a))});h.render=function(g,h,k,m,n,q){aa=!0;!J()||b.isDefinedAndEmpty(e.spin360ColorData[g])&&!c.getData(S(B.getCurrentItem()))?p.hideTabHeading("iv360TabHeading"):
(e.spin360ColorData[g]=c.getData(S(B.getCurrentItem())),b.isDefinedAndNotEmpty(e.spin360ColorData[g])?(a("#ivThumbs360").hide(),p.unhideTabHeading("iv360TabHeading"),b.isImmersiveViewEnabled(e,B.getCurrentItem().color)&&J()&&H(g)&&(h===e.maxAlts&&(g=m.find(".item.imageThumbnail"),h=m.find(".item.videoThumbnail"),b.isDefined(h)&&1<h.length?h.last().remove():g.last().remove()),g=m.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(g,
"button-360-click"),m.append(g),l.count("dppc_display360",e.mediaAsin),d.postCountMetric("dppc_display360"))):b.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled?(e.spin360ColorData[g]={},p.hideTabHeading("iv360TabHeading"),x(m,h,g)):p.hideTabHeading("iv360TabHeading"))};h.update=function(a){};p.attachTabSelectHandler("iv360Tab",D)}});v.register("nexusLogger360",function(){return{count:function(f,a){t.ue&&t.ue.event({asin:a,metricName:f,metricValue:1},"hit-360","hit360.clientEvent.3")},
time:function(f,a,b){t.ue&&t.ue.event({asin:b,metricName:f,metricValue:a},"hit-360","hit360.clientEvent.3")}}});v.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});v.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(f,a){var b={};return{setData:function(g){var l=g.asin;b[l]||(b[l]=g,f.trigger(a.TWISTER_DATA_EVENT,l))},getData:function(a){return b[a]}}});"use strict";v.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",
function(f,a){v.register("vse_ns_preLoaderHook",function(){function b(g,l){try{var d=g.A,p=g.block,c=g.request,q=g.handleFailure,n=g.handleSuccess,t=d.$;l--;var v=3-l-1,K=d.now();d.ajax("/vap/ew/componentbuilder",{params:c,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=d.now()-K;f.postTimeMetric("vse_preLoaderHook:success:",b);f.postCountMetric("vse_preLoaderHook:success:"+c.page+":"+c.placement+":"+
v);t(p).html(a);n(d,c,a)},error:function(a){f.postCountMetric("vse_preLoaderHook:error:"+c.page+":"+c.placement+":"+v);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<l?b(g,l):(f.postCountMetric("vse_preLoaderHook:error:",1),q(d,c,a))}})}catch(w){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",w)}}return{get:function(a,f,d,p,c){b({A:a,block:f,request:d,handleFailure:c,handleSuccess:p},3)}}});v.register("vse_ns_lazyLoaderHook",function(){function b(g,l,d){try{var p=g.A,
c=g.context,q=g.handleFailure,n=g.handleSuccess;l.attr("data-configuration");var t=atob(l.attr("data-configuration")),v=JSON.parse(t),K={pageContext:c,configuration:v},w=p.now();d--;var C=3-d-1;p.ajax("/vap/ew/subcomponent/"+v.type,{params:K,paramsFormat:"json",method:"post",contentType:"application/json",timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=p.now()-w;f.postTimeMetric("vse_lazyLoaderHook:success:",b);f.postCountMetric("vse_lazyLoaderHook:success:"+c.page+":"+c.placement+
":"+v.type+":"+C);l.html(a);n(p,K,a)},error:function(a){f.postCountMetric("vse_lazyLoaderHook:error:"+c.page+":"+c.placement+":"+v.type+":"+C);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<d?b(g,l,d):(f.postCountMetric("vse_lazyLoaderHook:error:",1),q(p,K,a))}})}catch(M){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",M)}}return{get:function(a,f,d,p,c){var q=a.$;q(f+" div[data-configuration]").each(function(){b({A:a,context:d,handleFailure:c,handleSuccess:p},q(this),
3)})}}});v.register("vse_ns_videoPlayer",function(){function b(g,l,d){try{var p=g.A,c=g.block,q=g.request,n=g.handleFailure,t=g.handleSuccess,v=p.$;d--;var K=3-d-1,w=p.now();p.ajax("/vap/ew/subcomponent/vseplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:q.timeout||5E3,withCredentials:!0,success:function(a){var b=p.now()-w;f.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);f.postCountMetric("vse_lightPlayerLoaderHook:success:"+q.page+
":"+q.placement+":"+K);v(c).html(a);t(p,q,a)},error:function(a){f.postCountMetric("vse_lightPlayerLoaderHook:error:"+q.page+":"+q.placement+":"+K);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<d?b(g,d):(f.postCountMetric("vse_lightPlayerLoaderHook:error:",1),n(p,q,a))}})}catch(C){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",C)}}return{get:function(a,f,d,p,c){b({A:a,block:f,request:d,handleFailure:c,handleSuccess:p},3)}}})});"use strict";v.when("A","ImageBlockATF",
"ImageBlockBTF","imageBlockUtils","postMetric").execute(function(f,a,b,g,l){var d=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var a=b.colorImages,c=0,f;for(f in a)a[f]&&a[f].length&&(c+=a[f].length);a="image_size_bucket:gt"+d[d.length-1];for(f=1;f<d.length;f++)if(c<=d[f]){a="image_size_bucket:"+d[f-1]+"-"+d[f];break}l.postCountMetric(a);g.addTag(a)})();(function(){var b=a.colorImages;b&&b.initial&&b.initial.length&&(b=b.initial.length,t.ue&&ue.count&&ue.count("altImageCount",b))})();(function(){var a=
b.lazyLoadExperienceDisabled;g.isDefined(b.lazyLoadExperienceDisabled)&&!a&&(l.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),g.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});v.when("A","get-resource-time","postMetric","afterLoad").execute(function(f,a,b){var g=f.state("desktop-landing-image-data");g&&(g=f.values(g),a=a.getResourceTimeByName("img",g),f.each(a,function(a){a&&(a.responseEnd!=ea&&b.postCountMetric("ibDesktopLandingImageDownloadTime",t.parseInt(a.responseEnd)),
a.transferSize!=ea&&(0===a.transferSize?b.postCountMetric("ibDesktopLandingImageCached",1):(b.postCountMetric("ibDesktopLandingImageSizeInBytes",t.parseInt(a.transferSize)),b.postCountMetric("ibDesktopLandingImageNotCached",1))))}))});v.now().register("ImageBlockShoppableSceneView",function(){function f(){}return function(){this.update=this.render=f}});v.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!1}})});
/* ******** */
(function(k){var d=window.AmazonUIPageJS||window.P,l=d._namespace||d.attributeErrors,b=l?l("DetailPageShowroomImageBlockAssets",""):d;b.guardFatal?b.guardFatal(k)(b,window):b.execute(function(){k(b,window)})})(function(k,d,l){k.when("A","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(b,p,f,g,h,a){function e(a){a=t.colorToAsin[a.color].asin;
a||(a=t.mediaAsin);return a}var d=void 0,t=void 0,m=void 0,q=void 0,k=void 0,n=void 0,u=void 0;return function(c,r,l,w){l=new Date;d=this;t=c;m=r;q=w;b.on(h.TWISTER_DATA_EVENT,function(a){e(m.getCurrentItem())===a&&(a={type:"updatedData",data:m.getCurrentItem()},q.dispatch("updateView",a))});d.render=function(p,c,d,h,l,w){p=new Date;k=h;n=l.find("#main-showroom-container");n.parent().find("#showroom-canvas-caption");b.$("#main-image-container");try{var v=e(m.getCurrentItem());if(f.isDataValidForAsin(v)){var z=
new Date,r=f.getDataForAsin(v);g.refresh(q,r.asin,r.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-z);if(!w){var x=new Date;g.updateMainImage(n,r.imageData,q);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-x)}var y=new Date;c=g.createThumbnail(t,h,c,r.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-y);var A=new Date;b.$("#ivShowroomTabHeading").removeClass("aok-hidden");
a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-A);if(v!==u){var B=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var C=a.createShowroomAtfEvent(r.defaultStageId,v,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(C);u=v;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-B)}}else b.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(E){b.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,
new Date-p);return c};d.update=function(c){var u=new Date;try{var b=c.data;m.setCurrentEvent(c);if(b.type===h.SHOWROOM_THUMBNAIL_TYPE){var d=new Date;b.interaction=c.type;b.isUserGenerated=!0;if(f.isDataValidForAsin(e(b))){"mouseenter"===b.interaction&&b.type===h.SHOWROOM_THUMBNAIL_TYPE&&g.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER);var r=f.getDataForAsin(e(b)).imageData;g.updateMainImage(n,r,q);g.showShowroomMainImage(n)}t.usePeekHover&&"click"!==c.type||
(p.selectGivenThumbnail(c.$declarativeParent,k),"click"===c.type&&p.useTabbedImmersiveView(t)&&g.handleShowroomThumbnailClick(c));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-d)}else b.type!==h.SHOWROOM_MAIN_IMAGE_TYPE&&("swatchHover"===c.type?b.color===m.getCurrentItem().color&&m.getCurrentItem().type===h.SHOWROOM_THUMBNAIL_TYPE?g.showShowroomMainImage(n):g.hideShowroomMainImage(n):g.hideShowroomMainImage(n))}catch(D){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-u)};(c=document.getElementById("ivShowroomTabHeading"))&&c.addEventListener("click",function(c){a.addOne(a.COUNTER_NAMES.TAB_SELECT);c=f.getDataForAsin(u).defaultStageId;c=a.createShowroomAtfEvent(c,u,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(c)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-l)}});"use strict";k.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";k.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-detail-page-rendering",function(b,p,d,g,h,a){function e(n){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);
var b=a.createShowroomAtfEvent(q,k,a.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b);f(n)}function f(a){a.action="showroomIngressClick";a.data=l;m.dispatch("showroomIngressClick",a)}var k,m,q,l;return{createThumbnail:function(a,b,c,e){c===a.maxAlts&&(b.find(".item.imageThumbnail").last().remove(),c--);l={type:"showroomIngress",index:0,thumbnailIndex:c,variant:e.variant};d.createThumbnail({type:h.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:c,variant:e.variant},
e.thumb,b,"showroom-imageblock-thumbnail");c++;return c},updateMainImage:function(a,d){var c=a.find("#showroom-main-image");c.length?c.attr("src",d.hiRes):(c=p("\x3cimg/\x3e").attr("src",d.hiRes).attr("id","showroom-main-image"),c.appendTo(a),b.declarative.create(a,"showroom-image-action",l),b.declarative("showroom-image-action",["click"],e),d=a.find("#showroom-main-image-overlay-container"),d.length||(d=g.getStringValue(h.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),c=g.getStringValue(h.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),
d=p('                \x3cdiv id\x3d"showroom-main-image-overlay-container"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+(c?c:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+d+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),d.appendTo(a)))},hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",
2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return p("#showroom-outer-container").hasClass("aok-hidden")},handleShowroomIngressClick:f,handleShowroomThumbnailClick:function(b){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var d=a.createShowroomAtfEvent(q,k,a.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(d);f(b)},handleShowroomMainImageClick:e,refresh:function(a,b,c){m=a;k=b;q=c}}});"use strict";k.when("A").register("showroom-image-block-metrics",
function(b){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select",
SHOWROOM_IMAGEBLOCK_FAILED_TO_INITIALIZED_WEBLAB_TRIGGER:"showroom:atf:imageBlock:failedToInitializeWeblabTrigger"},STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",
SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(b){try{if(d.ue&&b){var f=(d.ue.count(b)||0)+1;d.ue.count(b,f)}}catch(g){}},logValue:function(b,f){try{d.ue&&b&&"number"===typeof f&&d.ue.count(b,f)}catch(g){}},createShowroomAtfEvent:function(d,f,g,h){var a={};a.showroomId=d;a.asin=f;a.eventType=g;a.status=h;a.device=b.capabilities?b.capabilities.isAmazonApp?
"AmazonApp":b.capabilities.mobile?"mobile":b.capabilities.tablet?"tablet":"desktop":"";a.userAgent=navigator?navigator.userAgent:"";a.producerId="showroom_atf";a.schemaId="com.amazon.showroom.ingress.clientEvent.3";return a},logShowroomAtfEvent:function(b){try{d.ue&&d.ue.event&&b&&d.ue.event(b,"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(f){}}}});"use strict";k.when("A","showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(b,d){function f(){return h[a]}
function g(a){return a in h}var h={},a;return{setData:function(e){e&&e.asin&&e.imageDomain&&e.defaultCollageUrl&&e.defaultStageId&&Array.isArray(e.itemMainImagePhysicalIds)&&(a=e.asin,g(e.asin)||(h[e.asin]=e,b.trigger(d.TWISTER_DATA_EVENT,e.asin)))},getDataForCurrentAsin:f,getDataForAsin:function(a){return h[a]},getStringValue:function(a){return f().displayStrings?f().displayStrings[a]:""},isDataValidForAsin:g}})});
/* ******** */
