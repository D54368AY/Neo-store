(function(e){var k=window.AmazonUIPageJS||window.P,n=k._namespace||k.attributeErrors,b=n?n("DetailPageMobileIconFarmAssets@common","DetailPageMobileIconFarm"):k;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,k,n){e.when("A","ready").register("get-icon-farm-page-state",function(b){return{parseJSON:function(d){var c;try{c=b.$("#"+d).find('script[data-a-state\x3d"{"key":"iconfarm-state"}"]').html()}catch(a){console.log(a.message)}c?d=b.$.parseJSON(c):(b.state.parse(),
d=b.state("iconfarm-state"));return d}}});e.declare("iconfarm-metrics-constants",{ICON_FARM_FEATURE_DIV:"iconFarm_feature_div",ICON_FARM_PAGE_STATE_HOLDER_DIV:"iconfarm-pagestate-holder",METRIC_TYPE:{GLANCE_VIEW:"GLANCE_VIEW",ICON_CLICK:"ICON_CLICK",SECONDARY_PAGE_OPEN:"SECONDARY_PAGE_OPEN",SECONDARY_PAGE_CLOSE:"SECONDARY_PAGE_CLOSE",FULL_RETURN_POLICY:"FULL_RETURN_POLICY",PAGE_DATA_MISSING:"PAGE_DATA_MISSING",ABSENT:"ABSENT"},REF_MARKER_PREFIX:{ICON_FARM_WIDGET:"iconfarm_wid",AMAZON_DELIVERED:"iconfarm_ad",
RETURNS_POLICY:"iconfarm_rp",PAY_ON_DELIVERY:"iconfarm_pod",WARRANTY:"iconfarm_wr",EASY_CARE:"iconfarm_ec",AMAZON_PROTECT:"iconfarm_ap",NO_CONTACT_DELIVERY:"iconfarm_ncd",GENERIC_RETURN_POLICY:"iconfarm_grp",MULTIPLE_SPECIFIC_RETURN_POLICY:"iconfarm_msrp",SINGLE_SPECIFIC_RETURN_POLICY:"iconfarm_ssrp",PAYMENTS_AND_SECURITY:"iconfarm_ps",PAY_ON_DELIVERY_ACTIVE:"iconfarm_pod_active",PAY_ON_DELIVERY_INACTIVE:"iconfarm_pod_inactive",WARRANTY_EU:"iconfarm_wr_eu",AMAZON_MANAGED_DELIVERY:"iconfarm_amd",AMAZON_DELIVERED_MENA:"iconfarm_ad_mena",
SAFE_PAYMENTS:"iconfarm_sp",STATIC_RETURNS_POLICY:"iconfarm_srp",GENERIC_RETURNS_POLICY:"iconfarm_grp",SUPPORT_POLICY:"iconfarm_supp",RETURNS_POLICY_MENA:"iconfarm_rp_mena",WARRANTY360:"iconfarm_wr360"},REF_MARKER_SUFFIX:{GLANCE_VIEW:"_gv",ICON_CLICK:"_clk",SECONDARY_PAGE_OPEN:"_sp_op",SECONDARY_PAGE_CLOSE:"_sp_cl",FULL_RETURN_POLICY:"_frp",ABSENT:"_noavail"},NEXUS_CONFIG:{NEXUS_PRODUCER_ID:"a2i-dpx",NEXUS_SCHEMA_ID:"a2i.dpx.WidgetImpressions.3"},LOGGER_CONFIG:{DEFAULT_LOGGER:"default",NEXUS_LOGGER:"nexus"}});
e.when("A","iconfarm-return-policy-metric-logger","iconfarm-pay-on-delivery-metric-logger","iconfarm-default-metric-logger").register("iconfarm-icon-metric-factory",function(b,d,c,a){return{getIconMetric:function(b){switch(b){case "RETURNS_POLICY":case "RETURNS_POLICY_MENA":return d;case "PAY_ON_DELIVERY":return c;default:return a}}}});e.when("A","iconfarm-metricService","iconfarm-metrics-constants","get-icon-farm-page-state","iconfarm-icon-metric-factory","ready").register("iconfarm-metricLogger",
function(b,d,c,a,f){return{log:function(d,g,m){if(d&&g&&c.REF_MARKER_PREFIX[d]&&c.REF_MARKER_SUFFIX[g]){var h=a.parseJSON(c.ICON_FARM_PAGE_STATE_HOLDER_DIV);h&&f.getIconMetric(d).log(d,g,b.$.extend(!0,{asin:h.asin,merchantId:h.merchantId,remoteAddress:h.remoteAddress,isInternal:h.isInternal,isRobot:h.isRobot},m))}}}});e.when("A","iconfarm-metric-cache","ready").register("iconfarm-metricService",function(b,d){return{log:function(c){if(d.add(c)){var a="/ref\x3d"+c.ref,a=a+("?pageAsin\x3d"+c.asin),a=
a+("\x26pageType\x3d"+(b.capabilities?b.capabilities.mobile?b.capabilities.isAmazonApp?"DetailWebView":"DetailAW":"Detail":"")),a=a+"\x26subPageType\x3dIconFarm"+("\x26merchantId\x3d"+c.merchantId);b.get("/gp/product/ajax/dpx-metrics-handler.html"+a)}}}});e.when("A","ready").register("iconfarm-postmetric",function(){return{postCountMetric:function(b){if("undefined"!==typeof b){var d=k.ue;if(d){var c=d.count(b)||0;d.count(b,c+1)}}},postTimeMetric:function(b,d){if("undefined"!==typeof b&&"undefined"!==
typeof d){var c=k.ue;c&&c.count(b,d)}}}});e.when("A","ready").register("iconfarm-metric-cache",function(b){var d=[],c=function(a){if(!(a&&a.asin&&a.merchantId&&a.ref&&a.loggerType))return!1;var c=!1;b.each(d,function(b,d){b.asin===a.asin&&b.merchantId===a.merchantId&&b.ref===a.ref&&b.loggerType===a.loggerType&&(c=!0)});return c};return{isPresent:c,add:function(a){return a&&a.asin&&a.merchantId&&a.ref&&a.loggerType?c(a)?!1:(d.push(a),!0):!1},reset:function(){d=[]}}});"use strict";e.when("A","iconfarm-metric-cache",
"iconfarm-metrics-constants","ready").register("iconfarm-Nexus-Service",function(b,d,c){return{log:function(a){if(d.add(a)){var f={};f.producerId=c.NEXUS_CONFIG.NEXUS_PRODUCER_ID;f.schemaId=c.NEXUS_CONFIG.NEXUS_SCHEMA_ID;f.refMarker=a.ref;f.pageAsin=a.asin;f.pageType=b.capabilities?b.capabilities.mobile?b.capabilities.isAmazonApp?"DetailWebView":"DetailAW":"Detail":"";f.subPageType="IconFarm";f.server=k?k.ue_sn:"";f.merchantId=a.merchantId;f.remoteAddress=a.remoteAddress;f.isInternal=a.isInternal?
1:0;f.isRobot=a.isRobot?1:0;if(ue=k.ue)try{ue.event&&ue.event(f,c.NEXUS_CONFIG.NEXUS_PRODUCER_ID,c.NEXUS_CONFIG.NEXUS_SCHEMA_ID)}catch(e){ue.count("NexusLoggerFailure",1)}}}}});e.when("A","iconfarm-metricService","iconfarm-Nexus-Service","iconfarm-metrics-constants","iconfarm-postmetric","ready").register("iconfarm-default-metric-logger",function(b,d,c,a,f){return{log:function(e,g,m){d.log(b.$.extend(!0,m,{ref:a.REF_MARKER_PREFIX[e]+a.REF_MARKER_SUFFIX[g],loggerType:a.LOGGER_CONFIG.DEFAULT_LOGGER}));
m=JSON.parse(JSON.stringify(m));c.log(b.$.extend(!0,m,{ref:a.REF_MARKER_PREFIX[e]+a.REF_MARKER_SUFFIX[g],loggerType:a.LOGGER_CONFIG.NEXUS_LOGGER}));f.postCountMetric(a.REF_MARKER_PREFIX[e]+a.REF_MARKER_SUFFIX[g])}}});e.when("A","iconfarm-metricService","iconfarm-Nexus-Service","iconfarm-metrics-constants","iconfarm-postmetric","get-icon-farm-page-state","ready").register("iconfarm-return-policy-metric-logger",function(b,d,c,a,f,e){var g=function(){var b=e.parseJSON(a.ICON_FARM_PAGE_STATE_HOLDER_DIV);
if(b&&b.RETURNS_POLICY&&b.RETURNS_POLICY.secondaryViewData&&b.RETURNS_POLICY.secondaryViewData.glLevelReturnPolicies)switch(b.RETURNS_POLICY.secondaryViewData.glLevelReturnPolicies.length){case 0:return"GENERIC_RETURN_POLICY";case 1:return"SINGLE_SPECIFIC_RETURN_POLICY";default:return"MULTIPLE_SPECIFIC_RETURN_POLICY"}};return{log:function(e,h,l){e=g()||e;d.log(b.$.extend(!0,l,{ref:a.REF_MARKER_PREFIX[e]+a.REF_MARKER_SUFFIX[h],loggerType:a.LOGGER_CONFIG.DEFAULT_LOGGER}));l=JSON.parse(JSON.stringify(l));
c.log(b.$.extend(!0,l,{ref:a.REF_MARKER_PREFIX[e]+a.REF_MARKER_SUFFIX[h],loggerType:a.LOGGER_CONFIG.NEXUS_LOGGER}));f.postCountMetric(a.REF_MARKER_PREFIX[e]+a.REF_MARKER_SUFFIX[h])}}});e.when("A","iconfarm-metricService","iconfarm-Nexus-Service","iconfarm-metrics-constants","iconfarm-postmetric","get-icon-farm-page-state","ready").register("iconfarm-pay-on-delivery-metric-logger",function(b,d,c,a,e,k){return{log:function(g,m,h){var l;l=(l=k.parseJSON(a.ICON_FARM_PAGE_STATE_HOLDER_DIV))&&l.PAY_ON_DELIVERY&&
l.PAY_ON_DELIVERY.isEligible?l.PAY_ON_DELIVERY.isEligible?"PAY_ON_DELIVERY_ACTIVE":"PAY_ON_DELIVERY_INACTIVE":void 0;g=l||g;d.log(b.$.extend(!0,h,{ref:a.REF_MARKER_PREFIX[g]+a.REF_MARKER_SUFFIX[m],loggerType:a.LOGGER_CONFIG.DEFAULT_LOGGER}));h=JSON.parse(JSON.stringify(h));c.log(b.$.extend(!0,h,{ref:a.REF_MARKER_PREFIX[g]+a.REF_MARKER_SUFFIX[m],loggerType:a.LOGGER_CONFIG.NEXUS_LOGGER}));e.postCountMetric(a.REF_MARKER_PREFIX[g]+a.REF_MARKER_SUFFIX[m])}}})});
/* ******** */
(function(d){var g=window.AmazonUIPageJS||window.P,k=g._namespace||g.attributeErrors,a=k?k("DetailPageMobileIconFarmAssets@desktop","DetailPageMobileIconFarm"):g;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,g,k){d.when("A","a-popover","icon-farm-constants","iconfarm-metricLogger","iconfarm-metrics-constants","ready").register("icon-farm-desktop-popover",function(a,p,e,b,c){var f=function(e){var f=e.data("name");a.off("a:popover:beforeShow:"+f);a.on("a:popover:beforeShow:"+
f,function(a){b.log(f,c.METRIC_TYPE.ICON_CLICK);b.log(f,c.METRIC_TYPE.SECONDARY_PAGE_OPEN)});a.off("a:popover:beforeHide:"+f);a.on("a:popover:beforeHide:"+f,function(a){b.log(f,c.METRIC_TYPE.SECONDARY_PAGE_CLOSE)})};return{init:function(){for(var b=a.$(e.ICON_FARM_CONTAINER_CLASS),c=0;c<b.length;c++){var d=a.$(b[c]),h=d.data(e.TYPE_PARAM);if(h&&h===e.TYPE_PARAM_VALUE_CUSTOM_POP_OVER){var h=d,n=a.$("#"+h.data(e.POPOVER_CONTENT_PARAM)),n={activate:e.POPOVER_ACTIVATION,position:e.POPOVER_POSITION,width:e.POPOVER_WIDTH,
inlineContent:n.html(),name:h.data("name")};p.create(h,n);f(d)}}}}});d.when("A","get-icon-farm-page-state","icon-farm-constants","iconfarm-metricLogger","iconfarm-metrics-constants","ready").register("icon-farm-desktop-returns-policy",function(a,d,e,b,c){a.declarative("returns-policy-url","click",function(a){b.log("RETURNS_POLICY",c.METRIC_TYPE.FULL_RETURN_POLICY);a=d.parseJSON(e.ICON_FARM_PAGE_STATE_HOLDER_DIV);g.open(a.RETURNS_POLICY.genericReturnPolicyURL,"_blank")});a.off("a:popover:beforeShow:return-policy-secondary-view");
a.on("a:popover:beforeShow:return-policy-secondary-view",function(a){b.log("RETURNS_POLICY",c.METRIC_TYPE.ICON_CLICK);b.log("RETURNS_POLICY",c.METRIC_TYPE.SECONDARY_PAGE_OPEN)});a.off("a:popover:beforeHide:return-policy-secondary-view");a.on("a:popover:beforeHide:return-policy-secondary-view",function(a){b.log("RETURNS_POLICY",c.METRIC_TYPE.SECONDARY_PAGE_CLOSE)});return{init:function(){}}});d.when("A","IconFarmPageStateParserService","icon-farm-desktop-popover","icon-farm-desktop-returns-policy",
"iconfarm-metricLogger","icon-farm-constants","iconfarm-metrics-constants","iconfarm-metric-cache","atf","ready").execute(function(a,d,e,b,c,f,l,g){function m(){g.reset();a.loadImageManually(a.$(".icon-box"));e.init();b.init();h()}var h=function(){var b=a.$("#icon-farm-widget");b&&b.length?c.log("ICON_FARM_WIDGET",l.METRIC_TYPE.GLANCE_VIEW):c.log("ICON_FARM_WIDGET",l.METRIC_TYPE.ABSENT);(b=a.$(".icon-container"))&&b.length&&b.each(function(){c.log(a.$(this).data("name"),l.METRIC_TYPE.GLANCE_VIEW)})};
m();a.on("a:pageUpdate",function(){var b;a:{try{if(a.$("#"+f.ICON_FARM_V2_FEATURE_DIV).find("script").length){b=f.ICON_FARM_V2_FEATURE_DIV;break a}if(a.$("#"+f.ICON_FARM_V2_PRIMARY_FEATURE_DIV).find("script").length){b=f.ICON_FARM_V2_PRIMARY_FEATURE_DIV;break a}c.log("ICON_FARM_WIDGET",l.PAGE_DATA_MISSING)}catch(e){c.log("ICON_FARM_WIDGET",l.PAGE_DATA_MISSING)}b=void 0}b&&d.isNewState(b,f.ICON_FARM_STATE)&&(b=d.processState(b,f.ICON_FARM_STATE),a.objectIsEmpty(b)||m())})});d.declare("icon-farm-constants",
{ICON_FARM_FEATURE_DIV:"iconFarm_feature_div",ICON_FARM_V2_FEATURE_DIV:"iconfarmv2_feature_div",ICON_FARM_V2_PRIMARY_FEATURE_DIV:"iconFarmV2InsidePrimary_feature_div",ICON_FARM_PAGE_STATE_HOLDER_DIV:"iconfarm-pagestate-holder",ICON_FARM_CONTAINER_CLASS:".icon-container",ICON_FARM_SECONDARY_VIEW_HOLDER_ID:"#icon-farm-secondary-view-holder",ICON_FARM_STATE:"iconfarm-state",POPOVER_ACTIVATION:"onclick",POPOVER_POSITION:"triggerBottom",POPOVER_WIDTH:"533",POPOVER_CONTENT_PARAM:"iconContent",TYPE_PARAM:"type",
TYPE_PARAM_VALUE:"bottom-sheet",TYPE_PARAM_VALUE_CUSTOM_POP_OVER:"custom-pop-over"});(function(){d.when("A","atf","ready").register("IconFarmPageStateParserService",function(a){function d(e,b){b='script[data-a-state\x3d"'+JSON.stringify({key:b})+'"]';return a.$("#"+e).find(b)}return{processState:function(e,b){var c;try{var f=d(e,b),g=f[0];c=f.html();var k=a.parseJSON(c);a.state(b,k);a.$.data(g,"state_processed",!0);return k}catch(m){console.log(m)}return a.state(b)},isNewState:function(e,b){try{return!a.$.data(d(e,
b)[0],"state_processed")}catch(c){console.warn("Unable to determine state status",c)}return!1}}})})()});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageBylineInfoAssets@core","DetailPageBylineInfo"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
